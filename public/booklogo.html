<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon.png">
    <title>Aosta | Backbone - Patient Portal</title>
    <!-- Bootstrap Core CSS -->
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/plugins/bootstrap-extension/css/bootstrap-extension.css" rel="stylesheet">
    <link href="../assets/plugins/custom-select/custom-select.css" />
    <link href="../assets/plugins/bootstrap-select/bootstrap-select.min.css" />
    <link href="../assets/plugins/custom-select/custom-select.css" rel="stylesheet" type="text/css" />
    <!-- Calendar CSS -->
    <link href="../assets/plugins/calendar/dist/fullcalendar.css" rel="stylesheet" />
    <!-- animation CSS -->
    <link href="../assets/css/animate.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../assets/css/custom.css" rel="stylesheet">
    <link href="../assets/css/custom-style.css" rel="stylesheet">
    <link href="../assets/css/all-icons.css" rel="stylesheet">
    <link href="../assets/css/colors/blue.css" id="theme" rel="stylesheet">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://kit.fontawesome.com/8c09f23f73.js" crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" rel="stylesheet" />
    <link href="../Content/font-awesome.min.css" rel="stylesheet" />
    <link href="../assets/css/responsive.css" rel="stylesheet" />
    <link href="../assets/css/color.css" rel="stylesheet" />
    <!--Bootstrap Icon -->
    <link href="../assets/css/icons/boostrapicon/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        label {
            margin-bottom: 0px !important;
        }

        .fc-highlight {
            background-color: var(--mainBg) !important;
        }

        .Open {
            background-color: #CCFFE5;
        }

        .form-group {
            margin-bottom: 0px;
        }

        .fc-today {
            background-color: #ffffff !important;
        }

        .profileImg {
            width: 50%;
            border-radius: 50%;
        }

        #doctorname {
            font-size: 15pt;
            font-weight: 600;
            color: var(--textGray)
        }

        #department {
            color: var(--textGrayLite);
        }

        #displaydetails {
            font-size: 8pt;
            text-align: left !important;
        }

        .infoTitle {
            font-size: 12pt;
            font-weight: 500;
            color: var(--name);
        }

        .app_slot {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
        }

        .apmtType {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
        }

        .topSlot {
            height: 55vh;
            overflow: auto;
        }

        .fc th.fc-widget-header {
            background: var(--mainBg) !important;
        }

        .fc-view {
            margin-top: 15px !important;
        }

        .panel-title {
            font-size: 12pt;
            color: black;
            font-weight: 600;
            margin: 0px 0px 12px;
        }

        .content-box {
            background: #ffffff;
            padding: 13px !important;
            margin-bottom: 15px !important;
        }

        #timercount {
            font-size: 12pt;
            margin: 0px 3px;
        }

        #time_remaininig {
            font-size: 12pt;
        }

        input, select, textarea {
            border-radius: 5px !important;
            padding: 10px !important;
        }

            textarea::placeholder {
                font-size: 10pt;
                color: #CCCCCC;
            }

        lable {
            z-index: 9;
        }

        .select2-container .select2-choice .select2-arrow b {
            margin: 8px 7px 0px 0px !important;
        }

        .select2-container .select2-choice > .select2-chosen {
            padding: 10px !important;
        }

        .PatiLogout {
            border: none;
            padding: 5px 25px;
            background: var(--red);
            color: #fff;
            border-radius: 5px
        }

        .prfName span {
            font-family: 'Poppins', sans-serif !important;
        }

            .prfName span::before {
                margin: 0px 5px;
                font-family: 'FontAwesome';
            }

        .btnStyle {
            border-radius: 5px;
            outline: none !important;
        }

        .cardHeight {
            height: 40vh;
            max-height: 60vh;
        }

        .payLable {
            position: unset !important;
            top: 0 !important;
            left: 0 !important;
            width: 100%;
            padding: 0 !important;
        }

        /*.active {
            background-color: red;
        }*/

        #timercount {
            font-weight: 600;
        }
        /*checkbox design*/
        ul.ks-cboxtags {
            list-style: none;
            padding-left: 0px;
            margin: 0px;
        }

            ul.ks-cboxtags li {
                display: inline;
            }

                ul.ks-cboxtags li label {
                    display: inline-block;
                    background-color: rgba(255, 255, 255, .9);
                    border: 1px solid #ccc;
                    border-radius: 5px !important;
                    white-space: nowrap;
                    -webkit-touch-callout: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    -webkit-tap-highlight-color: transparent;
                    transition: all .2s;
                }

                ul.ks-cboxtags li label {
                    cursor: pointer;
                    padding: 6px 25px 6px 25px;
                }

                    ul.ks-cboxtags li label::before {
                        display: inline-block;
                        font-style: normal;
                        font-variant: normal;
                        text-rendering: auto;
                        -webkit-font-smoothing: antialiased;
                        font-family: "bootstrap-icons";
                        font-weight: 900;
                        font-size: 12px;
                        padding: 2px 10px 2px 2px;
                        content: "\f28a";
                        transition: transform .3s ease-in-out;
                    }
                /*.p-add > label::before {
            display: block !important;
            content: "\f015" !important;
        }*/

                ul.ks-cboxtags li input[type="radio"]:checked + label::before {
                    content: "\f272";
                    /*transform: rotate(-360deg);*/
                    transition: transform .3s ease-in-out;
                }

                ul.ks-cboxtags li input[type="radio"]:checked + label {
                    border: 1px solid var(--mainBg);
                    background-color: var(--mainBg);
                    color: #fff;
                    transition: all .2s;
                }

                ul.ks-cboxtags li input[type="radio"] {
                    display: absolute;
                }

                ul.ks-cboxtags li input[type="radio"] {
                    position: absolute;
                    opacity: 0;
                }




        /*payment button*/

        /*checkbox design*/
        ul.payBtn {
            list-style: none;
            padding-left: 0px;
            margin: 0px;
        }

            ul.payBtn li {
                display: inline;
            }

                ul.payBtn li label {
                    display: flex;
                    align-items: center;
                    background-color: rgba(255, 255, 255, .9);
                    border: 1px solid #ccc;
                    border-radius: 5px !important;
                    white-space: nowrap;
                    -webkit-touch-callout: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    -webkit-tap-highlight-color: transparent;
                    transition: all .2s;
                    font-weight: 600;
                    font-size: 8pt;
                }

                ul.payBtn li label {
                    cursor: pointer;
                    padding: 10px 25px 10px 25px;
                }

                    ul.payBtn li label::before {
                        display: inline-block;
                        font-style: normal;
                        font-variant: normal;
                        text-rendering: auto;
                        -webkit-font-smoothing: antialiased;
                        font-family: "bootstrap-icons";
                        font-weight: 900;
                        font-size: 12px;
                        padding: 2px 10px 2px 2px;
                        content: "\f28a";
                        transition: transform .3s ease-in-out;
                    }
                /*.p-add > label::before {
            display: block !important;
            content: "\f015" !important;
        }*/

                ul.payBtn li input[type="radio"]:checked + label::before {
                    content: "\f272";
                    /*transform: rotate(-360deg);*/
                    transition: transform .3s ease-in-out;
                }

                ul.payBtn li input[type="radio"]:checked + label {
                    border-left: 4px solid var(--mainBg);
                    background-color: var(--mainDull);
                    color: var(--mainBg);
                    transition: all .2s;
                }

                ul.payBtn li input[type="radio"] {
                    display: absolute;
                }

                ul.payBtn li input[type="radio"] {
                    position: absolute;
                    opacity: 0;
                }




        /*new style*/
        body {
            margin: 0;
            padding: 0;
            height: 0;
        }
        /*new headsection*/
        .drName h3 {
            color: var(--name);
            font-size: 18pt;
            font-weight: 500;
        }

        .drName h4 {
            color: #a2a2a2;
            font-weight: 400;
            font-size: 10pt;
        }

        .qual {
            color: var(--header);
            font-weight: 500;
            font-size: 10pt;
        }

            .qual span {
                color: grey;
                font-size: 9pt;
                font-weight: 500
            }

        .post {
            color: var(--header);
            font-weight: 500;
            font-size: 12pt;
        }

            .post span {
                color: grey;
                font-size: 10pt;
                font-weight: 400
            }

        .dayIcon::before {
            font-size: 15pt;
        }

        .appTimeBtn {
            border: 1px solid grey;
            padding: 5px 8px;
            margin: 5px;
            border-radius: 5px;
            background: #fff;
            font-weight: 500;
            transition: all 500ms ease;
            font-size: 9pt;
            outline: none;
        }

            .appTimeBtn:hover {
                border: 1px solid var(--mainBg);
                color: #fff;
                background: var(--mainBg);
                box-shadow: -1px 0px 5px 0px rgb(31 68 135);
                transition: all 500ms ease;
            }

        .appList {
            display: grid;
            grid-template-columns: repeat(2, 200px);
            font-size: 8pt;
            color: var(--danger);
        }

            .appList li {
                margin: 9px 0;
                font-weight: 500;
            }


        .apoint h5 {
            color: var(--header);
            font-weight: 500;
            font-size: 12pt;
        }



        .iconCircle {
            background: #aec8f769;
            border-radius: 60px;
            display: inline-block;
            color: var(--mainBg)
        }

        .profileImg {
            width: 80%;
            border-radius: 30px;
        }

        .carDate h4 {
            font-size: 20pt;
            margin: 5px;
            font-weight: 500;
            color: #9c9c9c
        }

        .monDay {
            font-size: 7pt;
            font-weight: 500;
            color: #afafaf
        }

        .activeDate {
            color: var(--mainBg) !important;
        }

        /*.appTime {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            transition: all 500ms ease;
        }*/
        .appTimeBtn {
            outline: none;
        }

        .owl-nav {
            display: block !important;
        }

            .owl-nav .owl-next, .owl-nav .owl-prev {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                -webkit-transform: translateY(-50%);
                outline: none !important;
            }

            .owl-nav .owl-next {
                right: 0;
                display: flex;
                margin-right: 2%;
                font-size: 25px !important;
                outline: none !important;
            }

            .owl-nav .owl-prev {
                left: 0;
                display: flex;
                margin-left: 2%;
                font-size: 25px !important;
                outline: none !important;
            }

        /*Appointmenttype*/
        /*checkbox design*/
        ul.appType {
            list-style: none;
            padding-left: 0px;
            margin: 0px;
        }

            ul.appType li {
                display: inline;
            }

                ul.appType li label {
                    display: inline-block;
                    background-color: #fff;
                    border: 1px solid #eae7e7;
                    border-radius: 5px !important;
                    white-space: nowrap;
                    -webkit-touch-callout: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    -webkit-tap-highlight-color: transparent;
                    transition: all .2s;
                    font-weight: 400;
                    font-size: 10pt;
                }

                ul.appType li label {
                    cursor: pointer;
                    padding: 6px 25px 6px 25px;
                }

                    ul.appType li label::before {
                        display: inline-block;
                        font-style: normal;
                        font-variant: normal;
                        text-rendering: auto;
                        -webkit-font-smoothing: antialiased;
                        font-family: "bootstrap-icons";
                        font-weight: 500;
                        font-size: 12px;
                        padding: 2px 10px 2px 2px;
                        content: "\f28a";
                        transition: transform .4s ease-in-out;
                        float: right;
                    }
                /*.p-add > label::before {
            display: block !important;
            content: "\f015" !important;
        }*/

                ul.appType li input[type="radio"]:checked + label::before {
                    content: "\f26a";
                    /*transform: rotate(360deg);*/
                    transition: transform .3s ease-in-out;
                }

                ul.appType li input[type="radio"]:checked + label {
                    border-left: 4px solid var(--mainBg);
                    background-color: rgb(142 182 255 / 49%);
                    color: #1F4487;
                    transition: all .2s;
                    font-weight: 500;
                }

                ul.appType li input[type="radio"] {
                    display: absolute;
                }

                ul.appType li input[type="radio"] {
                    position: absolute;
                    opacity: 0;
                }

        .noSlot h4 {
            font-size: 12pt;
            opacity: 0.8;
            color: var(--textGrayLite);
        }

        .carDate:hover .monDay {
            color: var(--mainBg)
        }

        .carDate:hover h4 {
            color: var(--mainBg)
        }

        .carDate:hover {
            background-color: var(--mainDull);
            border-radius: 5px;
            transition: all 200ms ease;
        }

        .highlightbg {
            background-color: var(--mainBg);
            border-radius: 5px;
            transition: all 500ms ease;
            color: #fff;
            border: none;
            outline: none;
        }

            /*.highlightbg:hover h4 {
                color: ;
            }

            .highlightbg:hover .monDay {
                color: #fff;
            }*/

            .highlightbg h4 {
                color: white;
                transition: all 500ms ease;
            }

            .highlightbg .monDay {
                color: white;
                transition: all 500ms ease;
            }

        .owl-prev {
            margin-left: 0px !important;
        }

        .owl-next {
            margin-right: 0px !important;
        }


        /*AppointmentDiffrent*/
        /*checkbox design*/
        ul.apmtType {
            list-style: none;
            padding-left: 0px;
            margin: 0px;
            padding-bottom: 8px;
            /*border-bottom: 1px solid #f1f1f1;*/
            margin-bottom: -8px;
        }

            ul.apmtType li {
                display: inline-block;
                margin: 0 1px;
            }

                ul.apmtType li label {
                    display: inline-block;
                    background-color: #fff;
                    border: 1px solid #d2cccc;
                    border-radius: 5px !important;
                    white-space: nowrap;
                    -webkit-touch-callout: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    -webkit-tap-highlight-color: transparent;
                    transition: all .2s;
                    font-weight: 400;
                    font-size: 10pt;
                }

                ul.apmtType li label {
                    cursor: pointer;
                    padding: 3px 10px 3px 10px;
                    text-align: center;
                }

                    ul.apmtType li label:hover {
                        box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 3px 0px;
                        cursor: pointer;
                    }

                    ul.apmtType li label::before {
                        display: inline-block;
                        font-style: normal;
                        font-variant: normal;
                        text-rendering: auto;
                        -webkit-font-smoothing: antialiased;
                        font-family: "bootstrap-icons";
                        font-weight: 500;
                        font-size: 12px;
                        padding: 2px 10px 2px 2px;
                        content: "\f28a";
                        transition: transform .4s ease-in-out;
                        float: right;
                        color: #fff;
                        display: none
                    }
                /*.p-add > label::before {
            display: block !important;
            content: "\f015" !important;
        }*/

                ul.apmtType li input[type="radio"]:checked + label::before {
                    content: "\f26a";
                    /*transform: rotate(360deg);*/
                    transition: transform .3s ease-in-out;
                }

                ul.apmtType li input[type="radio"]:checked + label {
                    border: 1px solid var(--mainBg);
                    background-color: var(--mainBg);
                    color: #fff;
                    transition: all .2s;
                    font-weight: 500;
                }

                ul.apmtType li input[type="radio"] {
                    display: absolute;
                }

                ul.apmtType li input[type="radio"] {
                    position: absolute;
                    opacity: 0;
                }

        .diffApp {
            border-bottom: 1px solid #ccc;
        }

        .yellow-casablanca {
            background-color: var(--teal);
            color: #fff
        }

        button[disabled], html input[disabled] {
            cursor: not-allowed;
        }

        .text-mainBg, .text-afterNoon, .text-evening {
            border-right: 1px solid #1f448773;
        }

        .disable {
            pointer-events: none;
            opacity: 0.7;
            cursor: not-allowed !important;
        }

            .disable button {
                background-color: #6E6E6E;
                border: 1px solid #6E6E6E;
            }

        #split span {
            font-style: italic;
            font-size: 12pt;
            color: var(--secondary);
        }
    </style>
</head>
<body>
    <section id="wrapper">
        <!-- Page Content -->
        <div id="page-wrapper">
            <div class="container-fluid my-3">
                <div class="text-center p-1 w-100" id="hiddencompanylogo" style="display:none;">
                    <a href="" id="siteurl" target="_blank">
                        <img width="12%" src="../assets/images/logo.png" />
                    </a>
                </div>
                <!--CALENDER START-->
                <div class="row mx-3" style="display:none;">
                    <div class="col-md-4 col-sm-12 text-center ">
                        <div class="p-2 gShadow radius cardHeight">
                            <!--<img src="../img/defaultdoc.png" alt="user" id="doctorimage" />-->
                            <img class="profileImg" src="../assets/images/users/user.png" alt="user" id="doctorimage" />

                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="gShadow radius p-4 cardHeight">
                            <div class="docDetails">
                                <h2 id="doctorname0" class="m-0"></h2>
                                <div class="d-flex justify-content-start">
                                    <span class="sub-tagline mx-1" id="department0"></span>
                                    <p class="my-4" style="color:red; display:none"><span id="departmentid"></span></p>
                                </div>
                                <p id="displaydetails" class="m-0" style="display:none"></p>
                            </div>
                            <div class="my-4 ">
                                <strong class="infoTitle"><i class="bi bi-journal-bookmark-fill"></i> Qualification</strong>
                                <p class="font-12 pl-4 my-2" id="qualification0"></p>
                            </div>
                            <div class="">
                                <strong class="infoTitle"><i class="bi bi-signpost"></i> Post</strong>
                                <p class="font-12 pl-4 my-2" id="designation0"></p>
                            </div>
                        </div>


                    </div>
                    <div class="col-md-3 col-sm-12  p-4" style="display:none">
                        <div class="">
                            <strong class="infoTitle"><i class="bi bi-geo-alt"></i> Address</strong>
                            <p class="font-12 pl-4 my-4" id="docaddress0"> 99, Avanashi Road, COIMBATORE - 641014</p>
                        </div>
                        <div class="">
                            <strong class="infoTitle"><i class="bi bi-phone-vibrate"></i> Phone</strong>
                            <p class="font-12 pl-4 my-4"> <a href="tel: +91 422 4323204" style="text-decoration:none;color:#635f5f" id="docphonenumber0"> +91 422 4323204</a></p>
                        </div>

                    </div>
                    <div class="col-md-6 col-sm-12">
                        <div class="gShadow radius p-4 cardHeight">
                            <div class="">
                                <strong class="infoTitle mb-2"> <i class="bi bi-calendar3"></i> Appointment</strong>
                                <p class="font-12 pl-4 my-4 " id="doctorremarks0"></p>
                            </div>
                            <div class="" style="display:none;">
                                <strong class="infoTitle"><i class="bi bi-geo-alt"></i>Location</strong>
                                <p class="font-12 pl-4 my-4" id="experience"></p>
                            </div>
                        </div>



                    </div>
                </div>

                <!--CALENDER END-->
                <!--SLOT START-->
                <div class="row white-box content-box mt-3" style="display:none;">
                    <div class="col-md-5">
                        <div id="calendar"></div>
                    </div>
                    <div class="col-md-7">
                        <div class="mt-4">
                            <div class="panel-header text-center">
                                <h4 class="panel-title"><i class="bi bi-calendar-week mr-2"></i> Select time slot to book an appointment</h4>
                            </div>
                            <div class="panel-body" style="padding:0px;">
                                <div class="app_slot_wrapper text-center" id="tblslot">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--SLOT END-->




                <div class="container-fluid p-0">
                    <div class=" gShadow radius pb-2">
                        <div class="row mx-2 mt-2 py-1">
                            <div class="col-md-2 col-sm-12 text-sm-center">
                                <div class="drImg">
                                    <img class="profileImg" src="../assets/images/users/user.png" />
                                </div>
                            </div>
                            <div class="col-md-5 drName border-md-right border-right">
                                <div class="pb-1 mb-1 nameDept">
                                    <h3 class="m-0" id="doctorname"></h3>
                                    <h4 class="m-0" id="department"></h4>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-center">
                                            <div>
                                                <i class="iconCircle fas fa-graduation-cap mr-3" title="Qualification" style=" padding:0.7em 0.6em; font-size:10pt"></i>
                                            </div>
                                            <div>
                                                <p class="qual mb-0"><span id="qualification"></span></p>
                                            </div>
                                        </div>

                                        <div class="d-flex align-items-center mt-1">
                                            <div>
                                                <i class="iconCircle fas fa-portrait mr-3" title="Designation" style="padding: 11px 12px; font-size:10pt"></i>
                                            </div>
                                            <div>
                                                <p class="qual mb-0"><span id="designation"></span></p>
                                            </div>
                                        </div>


                                    </div>

                                    <div class="col-md-6 apoint">
                                        <div class="d-flex align-items-center">
                                            <div>
                                                <i class="iconCircle bi bi-geo-alt-fill mr-3" title="Location" style="padding: 7px 10px; font-size:10pt"></i>
                                            </div>
                                            <div>
                                                <p class="qual mb-0"><span id="docaddress"></span></p>
                                            </div>
                                        </div>

                                        <div class="d-flex align-items-center mt-1">
                                            <div>
                                                <i class="iconCircle bi bi-reception-4 mr-3" title="Contact" style="padding: 7px 10px; font-size:10pt"></i>
                                            </div>
                                            <div>
                                                <p class="qual mb-0"><span id="docphonenumber"></span></p>
                                            </div>
                                        </div>
                                    </div>



                                </div>


                            </div>
                            <div class="col-md-5 apoint d-flex pl-md-4">
                                <div class="mt-1">
                                    <i class="bi bi-calendar2-week-fill mr-2 iconCircle" style=" padding: 9px 12px;font-size:10pt"></i>
                                </div>
                                <div class="ml-2 mt-1">
                                    <h5 class="mt-0 mb-0">
                                        Appointment
                                    </h5>
                                    <ul class="appList mt-2" id="doctorremarks">
                                        <!--<li><i class="bi bi-clock-fill mr-2"></i>Mon(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Tues(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Wed(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Thurs(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Fri(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Sat(12:30 - 5:30)</li>
                                        <li><i class="bi bi-clock-fill mr-2"></i>Sun(12:30 - 5:30)</li>-->
                                    </ul>

                                    <div class="d-none">
                                        <div class="col-md-12 mt-4">

                                            <div class="floating-labels">
                                                <div class="form-material">
                                                    <div class="pr-4">

                                                        <select class="form-control select2" id="cboclassname"></select>
                                                        <label for="input6">Class Name</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                            </div>
                        </div>

                        <div class="container-fluid pb-0 pt-2  mt-2 radius" style="display:none">
                            <div class="row my-1">
                                <div class="col-md-12" id="appType">
                                    <div class="radio-list pb-2">
                                        <!--<ul class="appType">
                                            <li class="col-md-4">
                                                <input type="radio" id="paytm" name="appointmentmode" value="30"><label class="w-100" for="paytm"><i class="bi bi-wifi mr-2"></i>Online Appointment</label>
                                            </li>
                                            <li class="col-md-4">
                                                <input type="radio" id="ob" name="appointmentmode" value="30"><label class="w-100" for="ob"><i class="bi bi-camera-video mr-2"></i>Video Consulting</label>
                                            </li>
                                            <li class="col-md-4">
                                                <input type="radio" id="cash" name="appointmentmode" value="30"><label class="w-100" for="cash"><i class="bi bi-journal-text mr-2"></i>MHC Booking</label>
                                            </li>
                                        </ul>-->
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="">
                            <div class="col-md-12 " id="appType1" style="background: #fff;">
                                <div class="radio-list pb-2 my-2 diffApp">
                                    <ul class="apmtType" id="ulclasstype">
                                        <!--<li class="">
                                            <input type="radio" id="paytm" name="appointmentmode" value="30"><label class="w-100 my-2" for="paytm">Ordinary</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="ob" name="appointmentmode" value="30"><label class="w-100 my-2" for="ob">Special</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash">Express</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash1" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash1">Management</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash">Express</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash1" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash1">Management</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash1" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash1">Management</label>
                                        </li>
                                        <li class="">
                                            <input type="radio" id="cash1" name="appointmentmode" value="30"><label class="w-100 my-2" for="cash1">Management</label>
                                        </li>-->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="container-fluid radius" style="background: #f5f5f5;">
                            <div class="row">
                                <div class="owl-carousel text-center px-5 pt-1 pb-1 mt-1" id="calendardateload">
                                    <!--<div class="carDate d-flex align-items-center justify-content-center">
                                        <h4>17</h4>
                                        <div class="monDay">
                                            <p class="m-0">Mon</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>
                                    <div class="carDate d-flex align-items-center justify-content-center">
                                        <h4>17</h4>
                                        <div class="monDay">
                                            <p class="m-0">dsds</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>
                                    <div class="carDate d-flex align-items-center justify-content-center">
                                        <h4>17</h4>
                                        <div class="monDay">
                                            <p class="m-0">Mon</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>
                                    <div class="carDate d-flex align-items-center justify-content-center activeDate">
                                        <h4 class="activeDate">17</h4>
                                        <div class="monDay activeDate">
                                            <p class="m-0">Mon</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>
                                    <div class="carDate d-flex align-items-center justify-content-center">
                                        <h4>17</h4>
                                        <div class="monDay">
                                            <p class="m-0">Mon</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>
                                    <div class="carDate d-flex align-items-center justify-content-center">
                                        <h4>17</h4>
                                        <div class="monDay">
                                            <p class="m-0">Mon</p>
                                            <p class="m-0">July</p>
                                        </div>
                                    </div>-->
                                </div>
                            </div>
                            <div class="row py-1 mt-1 align-items-center" style="background:#ddeaff">
                                <div class="col-md-2 text-center">
                                    <div class="text-mainBg">
                                        <i class="fas fa-mug-hot dayIcon"></i>
                                        <p class="m-0">
                                            Morning
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-10 col-sm-12 py-1">
                                    <!--<div class="noSlot text-center">
                                        <h4 class="m-0">
                                            No Slot Available
                                        </h4>
                                    </div>-->
                                    <div class="appTime" id="morningslot">
                                        <!--<button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>-->
                                    </div>
                                </div>
                            </div>
                            <div class="row py-1 align-items-center" style="background:#fff0e5">
                                <div class="col-md-2 text-center">
                                    <div class="text-afterNoon">
                                        <i class="fas fa-sun dayIcon"></i>
                                        <p class="m-0">
                                            Afternoon
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-10 col-sm-12 py-1">
                                    <div class="appTime" id="noonslot">
                                        <!--<button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>-->
                                    </div>
                                </div>
                            </div>
                            <div class="row py-1 align-items-center" style="background:#eaeaea">
                                <div class="col-md-2 text-center">
                                    <div class="text-evening">

                                        <i class="fas fa-cloud-moon dayIcon"></i>
                                        <p class="m-0">
                                            Evening
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-10 col-sm-12 py-1">
                                    <div class="appTime" id="eveslot">
                                        <!--<button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>
                                        <button class="appTimeBtn">19:23 - 00:00</button>-->
                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>
                </div>



                <!--REGISTRATION CONTENT START-->
                <div class="panel-wrapper collapse in" aria-expanded="true" id="hidregistrationcontant" style="display:none;">
                    <div class="">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <div class="doctor_summary">
                                            <div class="col-md-3 doc_img" style="display:none;">
                                                <img class="max-width-250 p-0" src="../assets/images/users/d2.jpg" alt="user" />
                                            </div>
                                            <div class="col-md-9 doc_detail">
                                                <div class="row">
                                                    <div class="col-md-12">

                                                        <!--dispaly:none-->
                                                        <div class="user-btm-box" style="display:none">
                                                            <div class="row p-b-10">
                                                                <div class="col-md-4 b-r p-b-10">
                                                                    <h2 id="doctornamemod">Dr. THOMAS ALEXANDER</h2>
                                                                    <span id="departmentmod" class="sub-tagline">Cardiologist</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="display:none">
                                                            <div class="col-md-12 text-center">
                                                            </div>

                                                            <div class="col-md-12" style="padding-left: 0px; margin-left: 0px;display:none;" id="packagehidden">

                                                                <div class="col-md-10" style="padding-left: 0px; margin-left: 0px;">
                                                                    <select required name="package" id="package" class="form-control input-large select2me"
                                                                            style="padding-left: 0px; margin-left: 0px;" placeholder="Please select the package......"></select>

                                                                </div>
                                                                <div class="col-md-2">
                                                                    <button id="packagedetails" class="btn btn-sm btn-info waves-effect waves-light m-r-5 pull-right" style="margin-top:3px;" onclick="PackageDetails()">
                                                                        Compare
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div><!--Panel Heading-->
                        <div class="gShadow radius mt-4">
                            <div class="container-fluid p-0">
                                <div class="row m-0 py-3 px-3 mb-3 panelHead" style="background: var(--mainDull);border-radius:10px 10px 2px 2px;">
                                    <div class="col-md-4 col-sm-12 d-flex justify-content-start ph1" style="color:var(--mainBg)">
                                        <span class="box-title">
                                            <span class="font-weight-bold m-0">₹<span class="ml-2" id="modalamount"></span></span>
                                            <span style="font-size:9pt" id="feesplitup" class="ml-2"></span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 text-center ph2" style="color:var(--mainBg)">
                                        <span class="box-title">
                                            <span class=""><i class="bi bi-calendar3"></i> <b id="appmodaldate" class="mt-1"> 20-Apr-2018 </b></span>
                                            <span class="form-control-static m-0 p-0 mr-2"> <span id="slotmodal"></span> </span>
                                        </span>


                                    </div>

                                    <div class="col-md-4 text-left ph3">
                                        <span class="box-title"><span class=" d-flex align-items-center justify-content-end" style="color:var(--danger)" id="time_remaininig"><i class="bi bi-alarm-fill mr-2"></i><span id="timercount">07:10 </span> Minutes! </span> </span>
                                    </div>



                                </div>
                                <div class="row mt-4 px-5" id="userchoosesection">
                                    <div class="col-md-12 pb-2 border-bottom">
                                        <div class="form-group text-center mb-1">
                                            <div class="radio-list pb-2">
                                                <ul class="ks-cboxtags">
                                                    <li onclick="newuser();" class="mx-4"><input type="radio" id="newuserrad" value="Rainbow Dash" name="regTab"><label for="checkboxOne" class="py-1 px-5">I am New to Hospital</label></li>
                                                    <li onclick="currentuser();" class="mx-4"><input type="radio" id="currentuserrad" value="Rainbow Dash" name="regTab"><label for="checkboxOne" class="py-1 px-5">I have a Patient Portal Details</label></li>
                                                    <li onclick="Exsistingreguser();" class="mx-4"><input type="radio" id="Exsistingregpat" value="Rainbow Dash" name="regTab"><label for="checkboxOne" class="py-1 px-5">I have a Registration Number</label></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--MHC STARD-->
                                <div style="display:none;">
                                    <i style="font-size: 16px; color: #00688B;" class="fa fa-user-md"></i>&nbsp;&nbsp;&nbsp;
                                    <span id="doctornamemodal" style="font-size: 16px; color: #00688B;"></span>
                                </div>
                                <div id="mhcinstamthidden1" style="display:none;">
                                    <i style="font-size: 16px; color: #00688B;" class="fa fa-inr"></i>&nbsp;&nbsp;&nbsp;
                                    <span id="Span5" style="font-size: 16px; color: #00688B;">&nbsp; Rs. &nbsp;</span><span id="modalamount1" style="font-size: 16px; color: #00688B;"></span> &nbsp;&nbsp;<span id="feesplitup1" style="font-size: 14px; color: Red;"></span>
                                </div>
                                <div style="display:none;">
                                    <span id="datemodal" style="font-size: 16px; color: #00688B;">
                                        <i class="fa fa-calendar">
                                        </i>&nbsp;&nbsp;
                                    </span><span id="slotmodal1" style="font-size: 16px; color: #00688B;">
                                        <i class="fa fa-clock-o"></i>&nbsp;&nbsp;
                                    </span><span id="slotidmodal" style="font-size: 16px;
                                            color: #6E6E6E; display: none">
                                    </span><span id="selectdatemodal" style="font-size: 16px; color: #6E6E6E; display: none">
                                        <i class="fa fa-clock-o"></i>&nbsp;&nbsp;
                                    </span><span id="deptidmodal" style="font-size: 16px;
                                            color: #6E6E6E; display: none">
                                        <i class="fa fa-clock-o"></i>&nbsp;&nbsp;
                                    </span>
                                </div>

                                <!--<div class="row" id="hiddpaymentdetails">
                                </div>-->
                                <div class="mt-3 px-5" id="newuserhide">
                                    <div class="row mt-3">
                                        <div class="col-md-2">
                                            <div class="">
                                                <div class="floating-labels">

                                                    <select class="form-control select2" id="sal" required="required"></select><span class="highlight"></span>
                                                    <label for="input6">Salutation</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-material">
                                                <div class=" floating-labels">

                                                    <input type="text" class="form-control" placeholder="" id="patname" required multiple>
                                                    <label for="input3">Patient Name</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="row">
                                                <div class="col-md-12">

                                                    <ul class="payBtn">
                                                        <li class="col-md-6 pl-0">
                                                            <input type="radio" id="Male" name="gender" value="M"><label class="w-100" for="Male">Male</label>

                                                        </li>
                                                        <li class="col-md-6 pr-0">
                                                            <input type="radio" id="Female" name="gender" value="F"><label class="w-100" for="Female">Female</label>
                                                        </li>

                                                    </ul>
                                                    <ul class="ks-cboxtags d-none">

                                                        <li class="col-md-4">
                                                            <input type="radio" id="Male" name="male" value="M"><label class="w-100" for="Male">Male</label>

                                                        </li>
                                                        <li class="col-md-4">
                                                            <input type="radio" id="Female" name="female" value="F"><label class="w-100" for="Female">Female</label>

                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 floating-labels">
                                            <div class="form-material">
                                                <div class=" ">

                                                    <select class="form-control select2" id="marital"></select>
                                                    <label for="input6">Marital Status</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 d-none">
                                            <div class="form-material">
                                                <div class=" floating-labels">

                                                    <input type="text" class="form-control" placeholder="" id="firstname" required multiple>
                                                    <label for="input3">First Name</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-md-6 d-none">
                                            <div class="form-material">
                                                <div class="floating-labels">

                                                    <input type="text" class="form-control" placeholder="" id="midname" required multiple>
                                                    <label for="input3">Middle Name</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 floating-labels">
                                            <div class="form-material">
                                                <div class="">

                                                    <input type="text" class="form-control" placeholder="" id="email" required multiple>
                                                    <label for="input3">Email Id</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 floating-labels">
                                            <div class="form-material">
                                                <div class=" ">

                                                    <input type="text" class="form-control" id="DOB" onchange="CalculateAge()" placeholder="" required multiple>
                                                    <label for="input3">Date of Birth</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 floating-labels">
                                            <div class="form-material">
                                                <div class=" ">

                                                    <input type="number" class="form-control" placeholder="" id="age" onchange="CalculateDOB()" required onkeypress='return event.charCode >= 48 && event.charCode <= 57' multiple>
                                                    <label for="input3">Age</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-md-4 floating-labels ">
                                            <div class="form-material">
                                                <div class="">

                                                    <input type="number" class="form-control" maxlength="10" placeholder="" id="mobile" onkeypress='return event.charCode >= 48 && event.charCode <= 57' onkeyup="fnMobileVerify(this)" required>
                                                    <label for="input3">Mobile No</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2" id="hiddensendotp">
                                            <button type="button" class="w-100 btn btn-sm btn-success py-3" onclick="fnSaveUserRegister(0,0)"><i class="fa fa-check"></i> Send</button>
                                        </div>
                                        <div class="col-md-2" id="hiddenresendotp" style="display:none;">
                                            <button type="button" class="w-100 btn btn-sm btn-danger py-3" onclick="fnResendOTP()"><i class="fa fa-check"></i> Re-Send</button>
                                        </div>
                                        <div class="col-md-4 floating-labels" id="hiddenotp" style="display:none;">
                                            <div class="form-material">
                                                <div class="">

                                                    <input type="number" class="form-control" maxlength="10" placeholder="" id="mobileotp" pattern="[0-9]{10}" required multiple>
                                                    <label for="input3">Enter OTP</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2" id="hiddenverify" style="display:none;">
                                            <button type="button" class="w-100 btn btn-sm btn-success py-3" onclick="fnVerifyOTP()"><i class="fa fa-check"></i>Verify</button>
                                        </div>


                                        <div class="col-md-12" style="display:none;" id="hiddenotptimer">
                                            <h3 class="box-title pull-left" style="font-size:14px;"><span class="text-danger" id="time_remaininig" style="color:#999797 !important;">Resend OTP will be enable after <span id="otptimercount" style="color:red; font-weight:bold;"></span></span> </h3>
                                        </div>

                                    </div>



                                    <div class="row mt-3">
                                        <div class="col-md-12">
                                            <div class="form-material">
                                                <div class=" floating-labels">

                                                    <div class="">
                                                        <textarea class="form-control" rows="3" placeholder="Mailing Address" required id="address" onkeyup="this.value = this.value.replace(/[&*<>$@#*()!~$%^?/|,.]/g, '')"></textarea>
                                                    </div>
                                                    <!--<label class="col-md-12">Mailing Address</label>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-md-6 floating-labels">
                                            <div class="form-material">
                                                <div class=" ">

                                                    <input type="text" class="form-control" id="temppincode" onchange="LoadPincodeData();" placeholder="" required multiple onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="6">
                                                    <label for="input3">Pincode/City</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6  floating-labels">
                                            <div class="form-material">
                                                <div class=" ">

                                                    <select class="form-control select2 p-0" required id="city" onchange="LoadStateDist();"></select>
                                                    <label for="input6">City</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <div class="form-material">
                                                <div class=" floating-labels">

                                                    <input type="text" class="form-control" placeholder="" id="PersonFill" required multiple>
                                                    <label for="input3">Relation name</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-material">
                                                <div class=" floating-labels">

                                                    <select class="form-control p-0" id="relationship" required></select>
                                                    <label for="input6">Relation Type</label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row my-3">
                                        <div class="col-md-12 p-0" id="hiddpaymentdetails">
                                            <!--<div class="radio-list pb-2">
                                                <ul class="payBtn">
                                                    <li class="col-md-4">
                                                        <input type="radio" id="paytm" name="age" value="30"><label class="w-100" for="paytm">Patym<img class="float-right" width="50" src="../assets/images/Svg/paytm.svg" /></label>
                                                    </li>
                                                    <li class="col-md-4">
                                                        <input type="radio" id="ob" name="age" value="30"><label class="w-100" for="ob">Online Baning<img class="float-right" width="50" src="../assets/images/Svg/paytm.svg" /></label>
                                                    </li>
                                                    <li class="col-md-4">
                                                        <input type="radio" id="cash" name="age" value="30"><label class="w-100" for="cash">Cash<img class="float-right" width="50" src="../assets/images/Svg/paytm.svg" /></label>
                                                    </li>
                                                </ul>
                                            </div>-->
                                        </div>

                                    </div>
                                    <div class="row justify-content-center">
                                        <div class=" mt-2" id="paymentbinddatanew">
                                            <div class=" d-md-flex justify-content-center">
                                                <button type="submit" class=" btn-info py-2 px-5 rounded-2 mx-2 btnStyle" id="btnmodal" onclick="PatientPortalNewRegistration();"> <i class="icon-check"></i> Confirm Appointment </button>
                                                <button type="reset" class=" btn-danger py-2 px-5 rounded-2 mx-2 btnStyle"> <i class="icon-cancel"></i> Cancel </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--EXISTING USER LOGIN START-->
                                <div id="newuserhide1" style="display: none">
                                    <div>
                                        <form id="form11" onsubmit="return false">
                                            <div class="">
                                                <label for="username" class="col-lg-3 control-label">
                                                    <i class="fa fa-user"></i>UserName <span class="require">*</span>
                                                </label>
                                                <div class="col-lg-9">
                                                    <input type="text" required class="form-control" style="height: 35px" name="username"
                                                           id="username">
                                                    <span class="help-block"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="email" class="col-lg-3 control-label">
                                                    <i class="fa fa-envelope"></i>Email <span class="require">*</span>
                                                </label>
                                                <div class="col-lg-9">
                                                    <input type="email" required class="form-control" style="height: 35px" name="email"
                                                           id="email1" />
                                                    <span class="help-block"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="phone" class="col-lg-3 control-label">
                                                    <i class="fa fa-phone"></i>Phone <span class="require">*</span>
                                                </label>
                                                <div class="col-lg-9">
                                                    <input type="number" required class="form-control" style="height: 35px" name="phone"
                                                           id="phone">
                                                    <span class="help-block"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="password" class="col-lg-3 control-label">
                                                    Password <span class="require">*</span>
                                                </label>
                                                <div class="col-lg-9">
                                                    <input type="password" required class="form-control" style="height: 35px" name="password"
                                                           id="password">
                                                    <span class="help-block"></span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12" style="padding-top: 10px; padding-right: 27px">
                                                    <button type="submit" onclick="myFunction()" id="btnlogin" class="btn btn-success pull-right">
                                                        Create an account &nbsp;<i class="fa fa-laptop"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!--EXISTING USER LOGIN END-->
                                <!--CURRENT USER START-->
                                <div id="currentuserhide" style="display: none;">

                                    <div class="content-form-page px-2">
                                        <!--<div class="row">-->
                                        <div class="">
                                            <form class="form-horizontal form-without-legend" onsubmit="return false" role="form"></form>
                                            <div id="results">
                                            </div>
                                            <form class="login-form floating-labels" id="form2" onsubmit="return false" action="PatientHome.html">
                                                <div class="row p-3">
                                                    <div class="col-md-6 col-sm-12 mt-3">
                                                        <div class="form-material">
                                                            <div class="form-group has-primary">

                                                                <input type="text" class="col-md-12 form-control" placeholder="" name="usernameone" id="usernameone" required multiple>
                                                                <label for="UserName">UserName</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-12 mt-3">
                                                        <div class="form-material">
                                                            <div class="form-group">

                                                                <input type="password" class="col-md-12 form-control" placeholder="" name="passwordone" id="passwordone" required multiple>
                                                                <label for="passwordone">Password</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <!--<div class="row pull-right" style="margin-right: 50px; display: none">
                                                    <div class="col-lg-12 ">
                                                        <a href="">Forget Password?</a>
                                                    </div>
                                                </div>-->


                                                <div class="d-flex justify-content-center">
                                                    <button type="submit" onclick="Login()" id="Button1" class="btnStyle btn-info px-5 py-3 mx-2">
                                                        Login &nbsp;
                                                    </button>
                                                    <button type="submit" onclick="Signup()" id="signupbtn" class="btnStyle btn-success px-5 py-3 mx-2">
                                                        Sign Up &nbsp;
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                        <!--</div>-->
                                    </div>
                                </div>
                                <!--CURRENT USER END-->
                                <!--EXISTING PATIENT LIST START-->

                                <div id="existregpatient" style="display: none" class="mt-4 px-3">

                                    <div class="row floating-labels">
                                        <div class="col-md-4">
                                            <div class="form-group">

                                                <div class="">
                                                    <input type="text" id="regno" placeholder="" class="form-control" value="" />
                                                    <label class="control-label ">
                                                        Registration No<span class="require" style="color: Red">*</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">

                                                <div class="">
                                                    <input type="number" id="phonenumber" pattern="[0-9]{10}" placeholder=""
                                                           class="form-control" />
                                                    <label class="control-label">
                                                        Phone Number
                                                    </label>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-1 d-flex justify-content-center align-items-center" id="split">
                                            <span>OR</span>
                                        </div>
                                        <div class="col-md-2" id="yob">
                                            <div class="form-group">

                                                <div class="">
                                                    <div class="input-group date date-picker" data-date-format="yyyy">

                                                        <input type="number" id="dob" name="dob" max="9999" onkeypress="if (this.value.length > 3) return false;" class="form-control">
                                                        <label for="email" class=" control-label">
                                                            Year of Birth
                                                        </label>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-actions">
                                                <div class="">
                                                    <div class="text-center ">

                                                        <button type="button" onclick="ExsistRegFunction()" id="btnsubmit" class="w-100 btn btn-success pull-right">
                                                            Submit
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <!--<div class="form-group">

                                        <div class="col-lg-11">
                                            <span class="help-block" style="color: #F5785A; font-weight: bold; margin-top: 0px;
                                                padding-top: 0px">
                                                <center>
                                                    (Enter atleast any one option from the below)
                                                </center>
                                            </span><span class="help-block"></span>
                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <div class="col-lg-11">
                                            <span class="help-block" style="color: #F5785A; font-weight: bold; margin-top: 0px;
                                                padding-top: 0px">
                                                <center>
                                                    (OR)
                                                </center>
                                            </span><span class="help-block"></span>
                                        </div>
                                    </div>-->


                                </div>

                                <!--EXISTING PATIENTLIST END-->
                                <!--MAIL UPDATE AND MAIL SUCCESS MESSAGE START-->
                                <form id="form3" onsubmit="return false">
                                    <div style="display: none;" id="hiddenmailupdate">
                                        <!--<div class="form-group">-->
                                        <div>
                                            <div class="col-md-12" style="padding:0px;">
                                                <div class="col-md-12" style="padding:0px;">
                                                    <label for="email" class="col-lg-3 control-label" id="maillabelnone" style="display: none;">
                                                        Email <span class="require">*</span>
                                                    </label>
                                                    <div class="col-lg-12" id="mailinputnone" style="display: none;">
                                                        <input type="email" required class="form-control" name="email" id="updatemailid"
                                                               style="border-color: red;" onkeypress="mailfocus()" />
                                                        <span class="help-block"></span>
                                                    </div>

                                                    <label class="col-lg-3 control-label" id="mobilelabelnone" style="display: none;">
                                                        Mobile <span class="require">*</span>
                                                    </label>
                                                    <div class="col-lg-12" id="mobileinputnone" style="display: none;">
                                                        <input type="text" required class="form-control" name="mobile" id="updatemobileno"
                                                               pattern="[0-9]{10}" style="border-color: red;" onkeypress="mobilefocus()" />
                                                        <span class="help-block"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="col-md-12">
                                            <div class="col-md-10">
                                                <span id="errorvalidateemail" style="color: red">

                                                    Registered email ID or mobile number is incorrect,please update correct mail id.
                                                </span>
                                            </div>
                                            <div class="col-md-2" style="margin-top:5px;">
                                                <input type="submit" onclick="UpdateMail();" id="btnmailmodal" class="btn btn-success pull-right"
                                                       value="Update" />
                                            </div>
                                        </div>
                                        <!--</div>-->
                                    </div>
                                    <div style="display: none;" id="hiddenmailsuccessmsg">
                                        <div class="form-group">
                                            <center>
                                                <label class="col-lg-12 control-label" style="color: var(--secondary); font-size: 17px;" id="mailmessage">
                                                </label>
                                            </center>
                                        </div>
                                    </div>
                                </form>
                                <!--MAIL UPDATE AND MAIL SUCCESS MESSAGE END-->
                                <!--PATIENT LIST START-->
                                <div class="scroller" style="height: auto;" data-always-visible="1" data-rail-visible="0">
                                    <div class="row my-3 px-2">
                                        <div class="col-md-12 pb-1" id="hiddpaymentdetailsreview" style="display:none;">
                                        </div>
                                    </div>
                                    <div class="row px-3" id="exsistinglisthide" style="display: none">
                                        <span id="reglogout" onclick="Logout();" class="pull-right" style="cursor: pointer;
                                            font-size: 15px; color: #B0171F;">Logout</span>
                                        <table class="table table-striped table-bordered table-hover">
                                            <thead class="text-center">
                                                <tr style="color: White;" class="portlet blue-dark box">
                                                    <th>
                                                        RegNo
                                                    </th>
                                                    <th>
                                                        Name
                                                    </th>
                                                    <th style="display: none">
                                                        User Added Date
                                                    </th>
                                                    <th style="display: none">
                                                        DOB
                                                    </th>
                                                    <th style="display: none">
                                                    </th>
                                                    <th>
                                                        <div class="hor-menu hidden-sm hidden-xs">
                                                            <center>
                                                                Appointments
                                                            </center>
                                                        </div>
                                                        <div class="hor-menu visible-sm visible-xs">
                                                            <center>
                                                                <i class="fa fa-pencil-square-o"></i>
                                                            </center>
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody id="tblexsistingpat"></tbody>
                                        </table>
                                    </div>
                                </div>
                                <!--patient list-->
                                <div class="scroller" style="height: auto;" data-always-visible="1" data-rail-visible="0">

                                    <div class="row px-3" id="patientlisthide" style="display: none">
                                        <div class="col-md-12 mb-3" id="usersection">
                                            <div class="">
                                                <button onclick="Logout();" class="pull-right PatiLogout" style="cursor: pointer; font-size: 15px;">Logout</button>
                                            </div>
                                            <div class="prfName">
                                                <span id="loginusername" style="font-size: 17px;color: #f05f2a" <i class="fa fa-user pull-left" style="color: #f05f2a; font-size: 17px; margin-left: 10px; padding-top: 7px"></i></span>
                                            </div>

                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover px-5">
                                                <thead>
                                                    <tr style="color: White;" class="portlet blue-dark box">
                                                        <th>
                                                            RegNo
                                                        </th>
                                                        <th>
                                                            Name
                                                        </th>
                                                        <th style="display: none">
                                                            User Added Date
                                                        </th>
                                                        <th style="display: none">
                                                            DOB
                                                        </th>
                                                        <th style="display: none">
                                                        </th>
                                                        <th align="center">
                                                            <div class="hor-menu hidden-sm hidden-xs">
                                                                <center>
                                                                    Appointments
                                                                </center>
                                                            </div>
                                                            <div class="hor-menu visible-sm visible-xs">
                                                                <center>
                                                                    <i class="fa fa-pencil-square-o"></i>
                                                                </center>
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody id="regnoul"></tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <!--</div>-->
                            </div>
                        </div>
                    </div>
                    <!--REGISTRATION CONTENT END-->
                    <!--REGISTRATION DETAILS PAYMENT START-->
                    <div class="row" id="registrationdetailpayment" style="display:none;">
                        <div class="col-md-12 light_section section_padding_bottom_75">

                            <div style="font-weight: bold; font-size: 14px; display: none;">
                                Registration closes in <span id="paymenttimer" style="color: Red; font-weight: bold;
                                        font-size: 17px;">00:10</span> minutes!
                            </div>
                            <div class="col-md-12">
                                <i style="font-size: 17px; color: #CD3278;" class="fa fa-user"></i>&nbsp;&nbsp;&nbsp;
                                <span id="apppatientname" style="font-size: 17px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12" id="hidregnofornew">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-laptop"></i>&nbsp;&nbsp;&nbsp;
                                <span style="font-size: 16px; color: #CD3278;">Registration No &nbsp;&nbsp;</span><span id="regappointmentno" style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12" id="mhcpackagehiddenreview" style="display:none;">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-medkit"></i>&nbsp;&nbsp;&nbsp;
                                <span style="font-size: 16px; color: #CD3278;">Package Name &nbsp;&nbsp;</span><span id="mhcpackagereview" style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12">
                                <hr />
                            </div>
                            <div class="col-md-12">
                                <center>
                                    <span id="reviewmodalload"></span>
                                </center>
                            </div>
                            <div class="col-md-12">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-user-md"></i>&nbsp;&nbsp;&nbsp;
                                <span id="regdoctorname" style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12" id="mhcreviewamthidden">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-inr"></i>&nbsp;&nbsp;&nbsp;
                                <span id="Span2" style="font-size: 16px; color: #CD3278;">&nbsp; Rs. &nbsp;</span><span id="regamount" style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-calendar"></i>&nbsp;&nbsp;&nbsp;
                                <span id="regappointment" style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12" style="display: none;">
                                <i style="font-size: 16px; color: #CD3278;" class="fa fa-file-o"></i>&nbsp;&nbsp;&nbsp;
                                <span style="font-size: 16px; color: #CD3278;">Bill No &nbsp;&nbsp;</span><span id="Reviewmodalbillno"
                                                                                                                style="font-size: 16px; color: #CD3278;"></span>
                            </div>
                            <div class="col-md-12">
                                <hr />
                            </div>
                            <div class="col-md-12" style="color: #00688B; display: none">
                                <span id="splitregno" class="col-md-7"></span>
                            </div>
                            <div class="col-md-12" style="color: #00688B;">
                                <span id="tokennumber" class="col-md-7"></span>
                            </div>
                            <div class="col-md-12" style="color: #00688B;">
                                <span id="appointmentdate" class="col-md-7"></span>
                            </div>
                            <div class="col-md-12" style="color: #00688B;">
                                <span id="slottime" class="col-md-7"></span>
                            </div>
                            <div id="hidereviewpayment">
                                <span id="Span3" class="col-md-7" style="padding-left: 30px; color: #CD3278; font-size: 15px;">
                                    Payment Status: Not Paid
                                </span>
                            </div>
                            <div>
                                <input type="button" id="printreviewdetails" class="btn green-haze pull-right" value="Print"
                                       onclick="PrintRegistration(2)" />
                            </div>
                            <div class="col-md-12" id="mhcreviewbottomhidden">
                                <hr style="padding-top: 3px; padding-bottom: 3px; margin-top: 6px; margin-bottom: 3px;" />
                                <input type="checkbox" id="reviewtermscondition" checked="checked" />&nbsp;<b style="color: #A1A1A1">
                                    I have read and agree to &nbsp;
                                </b> <a href="terms-conditions-page.html" target="_blank"
                                        style="text-decoration: underline;">Terms & Conditions</a>&nbsp; | &nbsp;<a href="privacy-policy.html"
                                                                                                                    target="_blank" style="text-decoration: underline;">
                                    Privacy Policy
                                </a><b style="color: #A1A1A1">&nbsp; of Booking Appointments</b>
                                <hr style="padding-top: 3px; padding-bottom: 3px; margin-top: 6px; margin-bottom: 3px;" />
                                <span style="color: Red; font-weight: bold; font-size: 17px;" id="reviewredirectmsg">
                                    You will be redirected to a secure payment gateway.
                                </span>
                                <input onclick="fnHDFCPaypayment(1);" id="btnnewpay" type="button" class="btn btn-success pull-right"
                                       value="Pay Now" style="display:none;" />
                                <input onclick="fnHDFCPaypayment(2);" id="btnreviewpay" type="button" class="btn btn-success pull-right"
                                       value="Pay Now" style="display:none;" />
                            </div>

                            <div class="col-md-12">
                                <hr style="padding-top: 3px; padding-bottom: 3px; margin-top: 3px; margin-bottom: 3px;" />
                            </div>
                            <div class="col-md-12" id="mhcreviewinsthidden">
                                <span style="color: Red; font-size: 15px;">
                                    * Your registration will be completed once
                                    your payment is successful.
                                </span>
                                <button style="display: none;" type="button" class="btn btn-success pull-right" onclick="refresh();">
                                    <i id="createuserreview">OK</i>
                                </button>
                            </div>
                            <div class="col-md-12" id="mhcreviewrefundhidden">
                                <span style="color: Red; font-size: 15px;">* Appointments booked online cannot be refunded.</span>
                            </div>
                        </div>
                    </div>
                    <!--REGISTRATION DETAILS PAYMENT CONTENT END-->
                </div>
            </div>
    </section>
    <section>
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <div class="form-material">
                        <div class="form-group ">
                            <div class="instr-group">
                                <a href="page-Instruction.html" target="_blank" style="text-decoration: underline;">Instructions</a> |<a href="page-faq.html" target="_blank" style="text-decoration: underline;">FAQ</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>
    <!-- jQuery -->
    <script src="../assets/plugins/jquery/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../Scripts/bootstrap.min.js"></script>
    <script src="../Scripts/bootstrap.bundle.js"></script>
    <script src="../assets/plugins/bootstrap-extension/js/bootstrap-extension.min.js"></script>
    <script src="../assets/js/waves.js"></script>
    <!-- Calendar JavaScript -->
    <script src="../assets/plugins/calendar/jquery-ui.min.js"></script>
    <script src="../assets/plugins/custom-select/custom-select.min.js"></script>
    <script src="../assets/plugins/moment/moment.js"></script>
    <script src='../assets/plugins/calendar/dist/fullcalendar.min.js'></script>
    <!-- Clock Plugin JavaScript -->
    <script src="../assets/plugins/clockpicker/dist/jquery-clockpicker.min.js"></script>
    <!-- Date Picker Plugin JavaScript -->
    <script src="../assets/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <script src="../assets/js/dynamicHeight.js"></script>
    <script src="../assets/js/script.js"></script>
    <!--<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>-->
    <script src="../assets/global/plugins/jquery.blockui.min.js"></script>
    <script src="../assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="Apikeyfetch.js"></script>
    <script type="text/jscript">
        var isredirectfromnonlogin = 0;
        if (localStorage.redirectflag == 'yes') {
            isredirectfromnonlogin = 1;
        } else {
            isredirectfromnonlogin = 0;
        }
        $(document).ready(function () {
            Apikeyfetch().then(
                function (value) {
                    $.ajaxSetup({
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("ApiKey", apikeydetails);
                        }
                    });
                    FetchBookingdays()
                    AllowCurrentdaycheck()
                    $('.owl-carousel').owlCarousel({
                        loop: true,
                        margin: 30,
                        items: 2,
                        nav: true,
                        responsive: {
                            0: {
                                items: 1
                            },
                            600: {
                                items: 3
                            },
                            1000: {
                                items: 7
                            }
                        },
                        navText: ['<span class="fa-stack1"><i class="fa fa-circle1"></i><i class=" ti-arrow-circle-left"></i></span>', '<span class="fa-stack1"><i class="fa fa-circle1"></i><i class=" ti-arrow-circle-right"></i></span>'],
                    })

                    $(".select2").select2({
                        allowClear: true
                    });

                    if (localStorage.redirectflag == "yes") {
                        $("#hiddencompanylogo").css("display", "")
                    }
                    else {
                        $("#hiddencompanylogo").css("display", "none")
                    }


                    LoadCompDetail(localStorage.companyid)

                    localStorage.goglecaptcha = "";
                    document.getElementById("hiddendoctorid").innerHTML = "";
                    document.getElementById("hiddendoctorid").innerHTML = localStorage.doctorid;

                    //Instructionmodalsts();
                    LoadRegistrationCloseTime()
                    LoadDocRemarks();

                    LoadIp();
                    LoadintialWebConfig();
                    LoadSecretKey();
                    LoadPayuURL()
                    var sal = $("#sal");
                    var strCon = "BB_CONSTR";
                    var strQuery3 = "exec FOOnline_LoadCombos @opt=44";
                    Loadcombo(strQuery3, strCon, sal);

                    var marital = $("#marital");
                    var strQuery3 = "exec FOOnline_LoadCombos @opt=43";
                    Loadcombo1(strQuery3, strCon, marital);

                    var relationship = $("#relationship");
                    var strQuery3 = "exec FOOnline_LoadCombos @opt=11";
                    Loadcombo(strQuery3, strCon, relationship);

                    var city = $("#city");
                    var strQuery3 = "exec FOOnline_LoadCombos @opt=40";
                    Loadcombo(strQuery3, strCon, city, 100);

                    var strCon = "BB_CONSTR";
                    var strQuery = "exec FOOnline_LoadCombos @opt=51,@Id=\'" + document.getElementById("hiddendoctorid").innerHTML + "\'";
                    LoadData(strQuery, strCon);

                    var strQuery = "exec FOOnline_LoadCombos @opt=52,@Id=\'" + localStorage.companyid + "\'";
                    LoadCompanyData(strQuery, strCon);

                    var strQuery3 = "exec FOOnline_LoadCombos @opt=89";
                    fnClassListType(strQuery3, strCon);

                    Fngetdate();
                    calview()
                    //LoadCalendardateload()
                    //ComponentsPickers.init();


                },
                function (error) { /* code if some error */ }
            );
        });



        window.addEventListener('beforeunload', (event) => {

            UpdateScheduleCount(1)
            event.preventDefault();
            event.returnValue = '';

        });

    </script>
    <script type="text/javascript">
        var ClassList = 0;
        function fnClassListType(strQuery, strCon) {
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    $.each(combo, function (index, item) {
                        if (item.bClass_Required_Doctor_Appointment == true) {
                            $("#ulclasstype").css("display", "");
                            var strQuery3 = "exec FOOnline_LoadCombos @opt=88,@docid=\'" + localStorage.doctorid + "\'";
                            LoadClasslist(strQuery3, strCon);
                            ClassList = 1;
                        }
                        else {
                            LoadCalendardateload(1)
                            $("#ulclasstype").empty();
                            $("#ulclasstype").css("display", "none");
                        }
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function LoadClasslist(strQuery, strCon) {
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    var counter = 1;
                    $("#ulclasstype").empty();
                    var classid = "";
                    $.each(combo, function (index, item) {
                        var idval = "classlist" + counter++;
                        if (index == 0) {
                            classid = item.iMast_Class_Id;
                            trHTML += '<li class="" onclick="LoadclassSlot(' + item.iMast_Class_Id + ')"><input type="radio" checked id=' + idval + ' name="classlistpayment" value=' + item.iMast_Class_Id + '><label class="w-100 my-2" for=' + idval + '>' + item.cClass_Description + '</label></li>';
                        }
                        else {
                            trHTML += '<li class=""  onclick="LoadclassSlot(' + item.iMast_Class_Id + ')"><input type="radio" id=' + idval + ' name="classlistpayment" value=' + item.iMast_Class_Id + '><label class="w-100 my-2" for=' + idval + '>' + item.cClass_Description + '</label></li>';
                        }
                    });
                    $("#ulclasstype").append(trHTML);
                    LoadCalendardateload(classid)
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function LoadclassSlot(classid) {
            if (document.getElementById("calendarclickvalue").value != "") {

                $("#hidregistrationcontant").css("display", "none");
                $("#morningslot").empty()
                $("#noonslot").empty()
                $("#eveslot").empty()
                var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classid + "\'";
                var strCon = "BB_CONSTR";
                Loadslottable(str9, strCon);
                var currentTime = new Date()
                var hours = currentTime.getHours()
                var minutes = currentTime.getMinutes()
                if (minutes < 10) {
                    minutes = "0" + minutes
                }
                var suffix = "1";
                if (hours >= 12) {
                    suffix = "2";
                    hours = hours - 12;
                }
                if (hours == 0) {
                    hours = 12;
                }
                Loadamount(document.getElementById('calendarclickvalue').value, suffix, doctorid);
            }
        }

        //load calendar date load
        function LoadCalendardateload(classid) {
            $.blockUI({ message: '<h6>Loading...</h6>' });
            var strCon = "BBOnline";
            var strQuery = "exec User_loginregister @opt=68,@AllowCurrentDayBook=\'" + document.getElementById("hiddenCurrentdaycheck").value + "\',@DocAppDaysCount=\'" + document.getElementById("hiddenbookingdays").value + "\'";
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {

                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    var data = [];
                    $("#calendardateload").empty();
                    var counter = 1;
                    $.each(combo, function (i, item) {
                        var date = "'" + item.datevalue + "'"
                        var idval = counter++;
                        var cc = "'" + "slot" + idval + "'";
                        if (i == 0) {
                            loadSlotData(item.datevalue, '0', classid)
                            trHTML += '<div class="carDate d-flex align-items-center justify-content-center highlightbg" style="cursor:pointer;" onclick="loadSlotData(' + date + ',' + cc + ',0)"><h4>' + item.date + '</h4><div class="monDay"><p class="m-0">' + item.day + '</p><p class="m-0">' + item.month + '</p></div></div>'

                        }
                        else {

                            trHTML += '<div id=' + cc + ' class="carDate d-flex align-items-center justify-content-center" style="cursor:pointer;" onclick="loadSlotData(' + date + ',' + cc + ',0)"><h4>' + item.date + '</h4><div class="monDay"><p class="m-0">' + item.day + '</p><p class="m-0">' + item.month + '</p></div></div>'

                        }

                    });

                    $("#calendardateload").append(trHTML)
                    $(".carDate ").click(function () {
                        $(".carDate").removeClass("highlightbg");
                        $(this).addClass("highlightbg");
                    });
                    var $owl = $('.owl-carousel');
                    $owl.trigger('destroy.owl.carousel');

                    $owl.html($owl.find('.owl-stage-outer').html()).removeClass('owl-loaded');
                    $owl.owlCarousel({

                        loop: true,
                        margin: 30,
                        items: 2,
                        nav: true,
                        responsive: {
                            0: {
                                items: 1
                            },
                            600: {
                                items: 3
                            },
                            1000: {
                                items: 7
                            }
                        },
                        navText: ['<span class="fa-stack1"><i class="fa fa-circle1"></i><i class=" ti-arrow-circle-left"></i></span>', '<span class="fa-stack1"><i class="fa fa-circle1"></i><i class=" ti-arrow-circle-right"></i></span>'],



                    });
                    window.setTimeout(function () {
                        $.unblockUI();
                    }, 2000);

                },
                failure: function (msg) {
                    alert(msg);
                }
            });

        }

        function loadSlotData(date, idvalue, classid) {
            $("#hidregistrationcontant").css("display", "none");
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            if (classid != 0) {
                document.getElementById("calendarclickvalue").value = date;
                document.getElementById("appmodaldate").innerHTML = date;
                document.getElementById("datevalue").value = date;
                //classtype=classid;
                var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classid + "\'";
                var strCon = "BB_CONSTR";
                Loadslottable(str9, strCon);
            }
            if (classtype == "" && ClassList == 1) {
                //var sid = "'" + '#slot' + idvalue + "'";
                alert("Please select the Class id")
                //$("#cboclassname").select2('open');
                //$(sid).removeClass("highlightbg");
            }
            else {
                document.getElementById("calendarclickvalue").value = date;
                document.getElementById("appmodaldate").innerHTML = date;
                document.getElementById("datevalue").value = date;
                GetCalDate()
            }
        }
        //load IP Address
        function LoadIp() {
            $.ajax({
                type: "Get",
                url: '../api/IpAddress/GetIpAddress',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    document.getElementById("ipaddress").value = combo;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //HOME REDIRECT URL LINK
        function LoadintialWebConfig() {
            $.ajax({
                type: "Get",
                url: '../api/Appointmentslide/GetAppointSlideView',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var splitdata = combo.split("~");
                    document.getElementById("RedirectUrl").href = splitdata[1];
                    document.getElementById("hidpaytmjsfilelink").value = splitdata[3];
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //Get Registration Close Time in min
        function LoadRegistrationCloseTime() {
            $.ajax({
                type: "Get",
                url: '../api/Regclosetime/GetRegistrationCloseTime',
                success: function (response) {
                    // $("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    //alert("time: " + combo)
                    document.getElementById("timercount").innerHTML = "";
                    document.getElementById("controlregcolsesec").innerHTML = "";
                    var value = "";
                    var regmin = "";
                    var regsec = "";
                    regmin = combo;
                    document.getElementById("timercount").innerHTML = regmin + ":00";
                    document.getElementById("controlregcolsesec").innerHTML = regmin * 60;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        function LoadDocRemarks() {
            var doctorid = document.getElementById("hiddendoctorid").innerHTML;
            var strQuery = "exec FOOnline_LoadCombos @opt=51,@Id=\'" + doctorid + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    $("#doctorremarks").empty();
                    if (response == '') {
                        $("#doctorremarks").empty()
                        //document.getElementById("doctorremarks").innerHTML = "";
                    }
                    else {
                        $.each(combo, function (index, item) {
                            var str = item.WorkingDays;
                            var count = (str.match(/<br>/g) || []).length;

                            for (i = 0; i < count; i++) {
                                trHTML += '<li><i class="bi bi-clock-fill mr-2"></i>' + str.split("<br>")[i] + '</li>'
                            }
                            $("#doctorremarks").append(trHTML);
                            //document.getElementById("doctorremarks").innerHTML = item.WorkingDays;
                        });

                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function FetchBookingdays() {
            $.ajax({
                type: "POST",
                url: '../api/Bookingdetails/FetchBookingdays',
                data: '{}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("hiddenbookingdays").value = combo;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function AllowCurrentdaycheck() {
            $.ajax({
                type: "POST",
                url: '../api/AllowCurrentDay/AllowCurrentdaycheck',
                data: '{}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("hiddenCurrentdaycheck").value = combo;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //All Combo load
        function Loadcombo(strQuery, strCon, name, value) {
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);

                    var html = "";
                    if (value == 100) {
                        $('#city').append('<option value=0></option>');
                    }

                    $.each(combo, function (index, item) {
                        $(name).get(0).options[$(name).get(0).options.length] = new Option(item.name, item.id);
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //load marital combo
        function Loadcombo1(strQuery, strCon, name, value) {
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    $('#marital').append('<option value=""></option>');
                    $.each(combo, function (index, item) {
                        if (item.id == 0) {
                        }
                        else if (item.id != 0) {
                            $(name).get(0).options[$(name).get(0).options.length] = new Option(item.name, item.id);
                        }
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Get Doctot Details
        function LoadData(strQuery, strCon) {
            //alert(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d); //getting the Response from JSON
                    var combo = eval(response);
                    document.getElementById("doctorname").innerHTML = "";
                    document.getElementById("doctornamemod").innerHTML = "";
                    document.getElementById("department").innerHTML = "";
                    document.getElementById("departmentmod").innerHTML = "";
                    document.getElementById("designation").innerHTML = "";
                    document.getElementById("departmentid").innerHTML = "";
                    document.getElementById("qualification").innerHTML = "";
                    document.getElementById("displaydetails").innerHTML = "";
                    document.getElementById("docaddress").innerHTML = "";
                    document.getElementById("docphonenumber").innerHTML = "";
                    $.each(combo, function (i, item) {
                        document.getElementById("doctorname").innerHTML = "Dr. " + item.cDocName;
                        document.getElementById("doctornamemod").innerHTML = "Dr. " + item.cDocName;
                        document.getElementById("department").innerHTML = item.cDept_Name;
                        document.getElementById("departmentmod").innerHTML = item.cDept_Name;
                        //if (item.DocPhone != "") {
                        //    document.getElementById("designation").innerHTML = item.cDesignation + "<i class='highlight rt-icon-phone-outline'></i><strong class='grey' >Contact :</strong> <a href='tel: " + item.DocPhone + "'>" + item.DocPhone + "</a>";
                        //}
                        //else {
                        //    document.getElementById("designation").innerHTML = item.cDesignation
                        //}
                        document.getElementById("designation").innerHTML = item.cDesignation
                        document.getElementById("departmentid").innerHTML = item.iDept_id;
                        document.getElementById("qualification").innerHTML = item.Qual;
                        document.getElementById("displaydetails").innerHTML = item.cDisplayDetail;

                        if (item.imgdocprofilepath == "" || item.imgdocprofilepath == null || item.imgdocprofilepath == "null") {
                            document.getElementById("doctorimage").src = "../img/defaultdoc.png";
                        }
                        else {
                            document.getElementById("doctorimage").src = "../" + item.imgdocprofilepath;
                        }
                        document.getElementById("docaddress").innerHTML = item.DocAddr;
                        document.getElementById("docphonenumber").innerHTML = "<a href='tel: " + item.DocPhone + "'>" + item.DocPhone + "</a>"; //item.DocPhone;
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //Get Company Details
        function LoadCompanyData(strQuery, strCon) {
            //alert(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d); //getting the Response from JSON
                    var combo = eval(response);
                    document.getElementById("experience").innerHTML = "";
                    $.each(combo, function (i, item) {
                        document.getElementById("experience").innerHTML = item.cCompany_Name;
                        document.getElementById("siteurl").href = "http://" + item.web;
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        function LoadSecretKey() {
            $.ajax({
                type: "Get",
                url: '../api/Secretkey/GetSecretKey',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);

                    document.getElementById("accountid").innerHTML = combo;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function Fngetdate() {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            var strQuery = "EXEC FOOnline_LoadCombos  @opt=80";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    var trHTML1 = '';
                    var startdate = "";
                    var passdate = "";
                    var passdate1 = "";

                    $.each(combo, function (i, item) {
                        startdate = item.datevalue;
                        passdate = item.datevalue1;
                        passdate1 = item.datevalue2;
                    });

                    $("#datevalue").datepicker("update", startdate);
                    document.getElementById("calendarclickvalue").value = passdate;
                    document.getElementById("appmodaldate").innerHTML = passdate;
                    document.getElementById("bookingdate").innerHTML = passdate1;
                    var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                    var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classtype + "\'";
                    var strCon = "BB_CONSTR";
                    // Loadslottable(str9, strCon);

                    var currentTime = new Date()
                    var hours = currentTime.getHours()
                    var minutes = currentTime.getMinutes()
                    if (minutes < 10)
                        minutes = "0" + minutes
                    var suffix = "1";

                    if (hours >= 12) {
                        suffix = "2";
                        hours = hours - 12;
                    }
                    if (hours == 0) {
                        hours = 12;
                    }
                    Loadamount(document.getElementById('calendarclickvalue').value, suffix, doctorid);
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //new registration amound
        function Loadamount(BookDt, Session, DocId) {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            var doctorid = document.getElementById("hiddendoctorid").innerHTML;
            document.getElementById("amount").innerHTML = "";
            document.getElementById("tempamount").innerHTML = "";
            var companyid = localStorage.ApiURLcompanyid;
            var strQuery = "exec NewReg_BillingService @PatientType=N'1',@DoctorId=N\'" + DocId + "\',@BookID=N'1',@SessionId=N\'" + Session + "\',@ClassId=N\'" + classtype + "\',@UnitId=N'0',@PriceLstId=N'1',@BillingRequired=N'3',@DeptId=N\'" + document.getElementById("departmentid").innerHTML + "\',@ConcessionSourceNameId=N'0',@TokenNo=N'0',@BookDt=N\'" + BookDt + "\',@RCMIntegrationRequired=N'0',@CompanyId=N\'" + companyid + "\'";
            var strCon = "BB_CONSTR";
            console.log(strQuery)
            var newpatbilldata = "";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d); //getting the Response from JSON
                    var combo = eval(response);
                    var regamount = 0;
                    var consultamount = 0;
                    let sum = 0;
                    $.each(combo, function (i, item) {
                        sum += item.ServiceAmount;
                        //newpatbilldata += "" + item.HeaderId + "~" + item.ServiceId + "~" + item.ServiceAmount + "~0~0~1~0~1~1~1~" + item.ServiceAmount + "~0~0~0|"
                        newpatbilldata += "" + item.HeaderId + "~" + item.ServiceId + "~1" + "~" + item.ServiceAmount + "~" + item.ServiceAmount + "~0~0~0~0~0~0~0~0~0~0~0~0~0~0|"

                        if (i == 0) {
                            //registration fee
                            regamount = item.ServiceAmount;
                            document.getElementById("hidserviceamount").value = item.ServiceAmount;
                            document.getElementById("hidserviceheaderid").value = item.HeaderId;
                            document.getElementById("hidserviceid").value = item.ServiceId;
                        }
                        if (i == 1) {
                            //consultation fee
                            consultamount = item.ServiceAmount;
                            document.getElementById("hidcosultationamount").value = item.ServiceAmount;
                            document.getElementById("hidcosultationheaderid").value = item.HeaderId;
                            document.getElementById("hidcosultationserviceid").value = item.ServiceId;
                        }

                        document.getElementById("feesplitup").innerHTML = "[ Doctor Fees + Registration Fees ]";
                        $("#amount").html(parseInt(regamount) + parseInt(consultamount));
                        document.getElementById("modalamount").innerHTML = parseInt(regamount) + parseInt(consultamount);
                        document.getElementById("tempamount").innerHTML = parseInt(regamount) + parseInt(consultamount);
                        document.getElementById("hidnewregbilldetailstr").value = newpatbilldata;
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Load Calendar
        function calview() {
            $('#calendar').fullCalendar({
                defaultView: 'month',
                /*header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },*/
                views: {
                    day: {
                        eventLimit: false
                    },
                    month: {
                        eventLimit: true
                    }
                },
                viewRender: function (event, element, view) {
                    var currentDate = new Date
                    //var date = new Date();
                    var tomorrow = moment(new Date()).add(1, 'days');
                    var formattedDate = moment(tomorrow).format('YYYY-MM-DD');
                    // document.getElementById("HidAppointmentDate").value = formattedDate;
                    $('#calendar').find('.fc-day[data-date=' + formattedDate + ']').addClass("fc-highlight");
                    var myDate = new Date();
                    myDate.setDate(myDate.getDate());
                    for (var i = 0; i < 7; i++) {
                        myDate.setDate(myDate.getDate() + 1);
                        var EnableDate = moment(myDate).format('YYYY-MM-DD');
                        // $('#calendar').find('.fc-day-number[data-date=' + EnableDate + ']').addClass("Open");
                        $('#calendar').find('.fc-day[data-date=' + EnableDate + ']').addClass("Open");
                    }
                },
                //selectable: true,
                dayClick: function (date, jsevent, view) {
                    $('td').removeClass("fc-highlight");
                    var myDate = new Date();
                    myDate.setDate(myDate.getDate() + 1);// Next Date
                    var daysToAdd = 6;//7
                    myDate.setDate(myDate.getDate() + daysToAdd);
                    var NewDate = new Date();
                    var CompareDate = moment(NewDate).format('YYYY-MM-DD');
                    var currentDate = new Date(date);
                    var datestring = moment(currentDate).format('YYYY-MM-DD');
                    var weekday = date.day();
                    weekday = weekday + 1;
                    // futrue date
                    if (date.isAfter(moment())) {
                        if (date < myDate) {
                            $('#calendar').find('.fc-day[data-date=' + datestring + ']').addClass("fc-highlight")
                            //alert(datestring)
                            document.getElementById("calendarclickvalue").value = datestring;
                            document.getElementById("appmodaldate").innerHTML = datestring;
                            document.getElementById("datevalue").value = datestring;
                            GetCalDate()
                        }
                        else {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
            });
        }

        //Clear Modat Details
        function newuser() {
            var currentTime = new Date()
            var hours = currentTime.getHours()
            var minutes = currentTime.getMinutes()
            if (minutes < 10)
                minutes = "0" + minutes
            var suffix = "1";

            if (hours >= 12) {
                suffix = "2";
                hours = hours - 12;
            }
            if (hours == 0) {
                hours = 12;
            }
            Loadamount(document.getElementById('calendarclickvalue').value, suffix, document.getElementById("hiddendoctorid").innerHTML);

            document.getElementById("feesplitup").innerHTML = "";
            document.getElementById("feesplitup").innerHTML = "[ Doctor Fees + Registration Fees ]";

            document.getElementById("newuserrad").checked = true;
            document.getElementById("currentuserrad").checked = false;
            document.getElementById("Exsistingregpat").checked = false;

            $("#hiddpaymentdetailsreview").css("display", "none");
            $("#newuserhide").css("display", "");
            $("#currentuserhide").css("display", "none");
            $("#existregpatient").css("display", "none");
            $("#patientlisthide").css("display", "none");
            $("#exsistinglisthide").css("display", "none");

            $("#hiddenmailupdate").css("display", "none");
            $("#hiddenmailsuccessmsg").css("display", "none");
            $("#tempmodalclose").css("display", "");
            $("#reviewmodalclose").css("display", "");

            $("#btnreviewpay").css("display", "");
            $("#btntemppayment").css("display", "");

            $("#newredirectmsg").css("display", "");
            $("#reviewredirectmsg").css("display", "");
            document.getElementById("btnmodal").disabled = false;
            //var list=$("#hiddpaymentdetails").html();
            //(list).insertBefore("#paymentbinddatanew");
        }

        function currentuser() {

            var patid = 0;
            GetamountReviewPatient(patid)

            document.getElementById("feesplitup").innerHTML = "";
            document.getElementById("feesplitup").innerHTML = "[ Doctor Fees ]";

            document.getElementById("newuserrad").checked = false;
            document.getElementById("currentuserrad").checked = true;
            document.getElementById("Exsistingregpat").checked = false;
            $("#hiddpaymentdetailsreview").css("display", "");

            $("#newuserhide").css("display", "none");
            $("#currentuserhide").css("display", "");
            $("#existregpatient").css("display", "none");

            $("#patientlisthide").css("display", "none");
            $("#exsistinglisthide").css("display", "none");

            $("#hiddenmailupdate").css("display", "none");
            $("#hiddenmailsuccessmsg").css("display", "none");

            $("#tempmodalclose").css("display", "");
            $("#reviewmodalclose").css("display", "");

            $("#btnreviewpay").css("display", "");
            $("#btntemppayment").css("display", "");

            $("#newredirectmsg").css("display", "");
            $("#reviewredirectmsg").css("display", "");
            document.getElementById("btnmodal").disabled = false;

            if (localStorage.ppapiloginusername != "" && localStorage.ppapiloginusername != undefined) {
                var username = localStorage.ppapiloginusername;
                var password = localStorage.password;
                Loadselectedcombo(username, password)
            }
        }
        function Exsistingreguser() {
            var patid = 0;
            GetamountReviewPatient(patid)

            localStorage.OnlineRegusername = "";

            document.getElementById("feesplitup").innerHTML = "";
            document.getElementById("feesplitup").innerHTML = "[ Doctor Fees ]";

            document.getElementById("newuserrad").checked = false;
            document.getElementById("Exsistingregpat").checked = true;
            $("#hiddpaymentdetailsreview").css("display", "");
            $("#newuserhide").css("display", "none");
            $("#currentuserhide").css("display", "none");
            $("#patientlisthide").css("display", "none");
            $("#existregpatient").css("display", "");

            $("#hiddenmailupdate").css("display", "none");
            $("#hiddenmailsuccessmsg").css("display", "none");

            $("#tempmodalclose").css("display", "");
            $("#reviewmodalclose").css("display", "");

            $("#btnreviewpay").css("display", "");
            $("#btntemppayment").css("display", "");

            $("#newredirectmsg").css("display", "");
            $("#reviewredirectmsg").css("display", "");
            document.getElementById("btnmodal").disabled = false;

            $("#exsistinglisthide").css("display", "none");
            localStorage.RegNoReview = "";
            localStorage.DobReview = "";
            if (localStorage.RegNoReview != "" && localStorage.DobReview != "") {
                document.getElementById("regno").value = "";
                document.getElementById("dob").value = "";
                if (localStorage.RegNoReview == null) {
                    var regNumb = ''

                }
                else {
                    var regNumb = localStorage.RegNoReview
                }
                document.getElementById("regno").value = regNumb;
                // document.getElementById("dob").value = localStorage.DobReview;
                document.getElementById("phonenumber").value = localStorage.MobilenoReview;
                $("#existregpatient").css("display", "none");
                var strCon = "BB_CONSTR";
                var str4 = "";
                var strQuery = "exec FO_Online_ReviewReg @opt=1,@regno=\'" + document.getElementById("regno").value + "\',@mobile=\'" + document.getElementById("phonenumber").value + "\',@year=''";
                LoadRegData(strQuery, strCon);
            }
            else {
                if ((document.getElementById("regno").value != "") && (document.getElementById("dob").value != "")) {
                    var strCon = "BB_CONSTR";
                    var strQuery = "exec FO_Online_ReviewReg @opt=1,@regno=\'" + document.getElementById("regno").value + "\',@mobile='',@year=\'" + document.getElementById("dob").value + "\'";
                    LoadRegData(strQuery, strCon);
                }

            }
        }

        //Load the patient details against the Registration Number & Mobile or DOB
        function LoadRegData(strQuery, strCon) {
            localStorage.OnlineReguserid = "";
            document.getElementById("createuserreview").innerHTML = "";
            $("#reglogout").css("display", "none");
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {

                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    var patientname = "";
                    var address = "";
                    var city = "";
                    var mobile = "";
                    var email = "";
                    var state = "";
                    var country = "";
                    var counter = 0
                    $('#tblexsistingpat')
                        .find('tr')
                        .remove()
                        .end()
                    if (response == "") {

                        trHTML = '<tr><td colspan="6"> No Data Found</td></tr>'
                        $("#exsistinglisthide").css("display", "");
                        $("#patientlisthide").css("display", "none");
                        $('#tblexsistingpat').append(trHTML);
                        alert("No records to display with this combinations.");
                        //$("#displaydetails").css("display", "none");
                    }
                    else {
                        // $("#displaydetails").css("display", "");

                        $.each(combo, function (index, item) {
                            var link = "";
                            var RegNo = "";
                            patientname = "'" + item.cpat_name + "' ";
                            address = "'" + item.cAddress1 + "' ";
                            city = "'" + item.cCity + "' ";
                            mobile = "'" + item.cMobile + "' ";
                            email = "'" + item.Email + "' ";
                            state = "'" + item.State + "' ";
                            country = "'" + item.Nation + "' ";
                            var rowcount = counter++
                            var registerno = "'" + item.iReg_No + "' ";
                            trHTML += '<tr class="odd gradeX"> <td>' + item.iReg_No + '</td><td>' + item.cpat_name + '</td><td style="display:none">' + item.dDob + '</td><td style="display:none">' + item.dDob + '</td><td style="width:20px; height:20px; display:none"> <i style=" color:green;cursor:pointer" onclick="javascript:fnMenuLink(' + link + ',' + RegNo + ');"  class="glyphicon glyphicon-home"><a href="javascript:fnMenuLink(' + link + ',' + RegNo + ');"></a>  </i></li> </td> <td align="center"> <button type="submit" onclick="Exsistregisteredhistoryclick(' + item.iPat_id + ',' + registerno + ',' + patientname + ',' + address + ',' + city + ',' + mobile + ',' + email + ',' + state + ',' + country + ',' + rowcount + ')" id=' + rowcount + ' class="btn yellow-casablanca more"   style="border-radius:4px; height:30px; padding-top:0px; padding-bottom:0px; text-transform:none;"><div class="hor-menu hidden-sm hidden-xs">Confirm</div><div class="hor-menu visible-sm visible-xs"><i class="fa fa-clock-o"></i></div></button></li></td></tr>';
                        });

                        //  $("#Exsistingregpat").css("display", "none");
                        // $("#patientlisthide").css("display", "none");
                        $("#exsistinglisthide").css("display", "");
                        $("#patientlisthide").css("display", "none");
                        $('#tblexsistingpat').append(trHTML);

                        document.getElementById("regno").value = "";
                        document.getElementById("phonenumber").value = "";
                        document.getElementById("dob").value = "";
                        document.getElementById("createuserreview").innerHTML = "Sign Up";

                        document.getElementById("newuserrad").checked = false;
                        document.getElementById("currentuserrad").checked = false;
                        document.getElementById("Exsistingregpat").checked = true;
                        //($("#hiddpaymentdetails").html()).insertBefore("#exsistinglisthide");
                    }
                },
                failure: function (msg) {

                    alert(msg);
                }
            });
        }

        //get amount for review patient
        function GetamountReviewPatient(patid) {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            var currentTime = new Date()
            var hours = currentTime.getHours()
            var minutes = currentTime.getMinutes()
            if (minutes < 10)
                minutes = "0" + minutes
            var suffix = "1";
            if (hours >= 12) {
                suffix = "2";
                hours = hours - 12;
            }
            if (hours == 0) {
                hours = 12;
            }
            var companyid = localStorage.ApiURLcompanyid;
            //var strQuery = "EXEC  FO_Online_ReviewReg @opt=-24,@docID=\'" + document.getElementById("hiddendoctorid").innerHTML + "\',@bookDt=\'" + document.getElementById('calendarclickvalue').value + "\',@bookID=0, @session=\'" + suffix + "\' ,@class=1, @valid=0,@PrLstId=1,@PatType =3,@Corp =0,@Nation = 1, @DeptId=\'" + document.getElementById("departmentid").innerHTML + "\' ,@patID=\'" + patid + "\'";
            var strQuery = "exec ReviewReg_BillingService @PatientType=N'1',@DoctorId=N\'" + document.getElementById("hiddendoctorid").innerHTML + "\',@BookID=N'1',@SessionId=N\'" + suffix + "\',@ClassId=N\'" + classtype + "\',@UnitId=N'0',@PriceLstId=N'1',@BillingRequired=N'3',@DeptId=N\'" + document.getElementById("departmentid").innerHTML + "\',@ConcessionSourceNameId=N'0',@TokenNo=N'0',@PatId=N\'" + patid + "\',@BookDt=N\'" + document.getElementById('calendarclickvalue').value + "\',@RCMIntegrationRequired=N'0',@CompanyId=N\'" + companyid + "\'"
            var strCon = "BB_CONSTR";
            console.log(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var value = "";
                    let sum = 0;
                    var reviewpatbilldata = "";
                    $.each(combo, function (index, item) {
                        //var amount = item.iOPRate.toFixed(2);

                        sum += item.ServiceAmount;
                        //reviewpatbilldata += "" + item.HeaderId + "~" + item.ServiceId + "~" + item.ServiceAmount + "~0~0~1~0~1~1~1~" + item.ServiceAmount + "~0~0~0|"
                        reviewpatbilldata += "" + item.HeaderId + "~" + item.ServiceId + "~1" + "~" + item.ServiceAmount + "~" + item.ServiceAmount + "~0~0~0~0~0~0~0~0~0~0~0~0~0~0|"

                        var amount = item.ServiceAmount;
                        document.getElementById("hidreviewserviceamount").value = item.ServiceAmount;
                        document.getElementById("hidreviewserviceheaderid").value = item.HeaderId;
                        document.getElementById("hidreviewserviceid").value = item.ServiceId;
                    });
                    document.getElementById("reviewamountvalue").innerHTML = "";
                    document.getElementById("modalamount").innerHTML = "";
                    document.getElementById("amount").innerHTML = "";
                    document.getElementById("regamount").innerHTML = "";

                    document.getElementById("reviewamountvalue").innerHTML = sum;
                    document.getElementById("modalamount").innerHTML = sum;
                    // document.getElementById("tempamount").innerHTML = sum;
                    document.getElementById("regamount").innerHTML = sum;
                    document.getElementById("amount").innerHTML = sum;
                    document.getElementById("hidreviewregbilldetailstr").value = reviewpatbilldata;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Button login click
        function Login() {
            var username = document.getElementById("usernameone").value;
            var password = document.getElementById("passwordone").value;
            var strQuery4 = "exec User_loginregister @opt=2,@username=\'" + document.getElementById("usernameone").value + "\',@password=\'" + document.getElementById("passwordone").value + "\'";
            var strCon = "BBOnline";
            Loadselectedcombo(document.getElementById("usernameone").value, document.getElementById("passwordone").value)
        }
        //lOGIN-Check whether exists
        function Loadselectedcombo(username, password) {
            console.log(username + "," + password)
            $.ajax({
                url: '../api/login',
                type: 'POST',
                data: { username: username, password: password },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("loginusername").innerHTML = "";
                    //if (response.d != "[]") {
                    if (response != 0) {
                        $.each(combo, function (index, item) {
                            localStorage.OnlineRegusername = "" + item.cLogin + "";
                            localStorage.OnlineReguserid = "" + item.iUser_id + "";
                            //localStorage.password = "" + item.cPassword + "";
                            document.getElementById("uname").innerHTML = item.cLogin;
                            if (document.getElementById("usernameone").value == "") {
                                document.getElementById("loginusername").innerHTML = localStorage.ppapiloginusername;
                            }
                            else {
                                document.getElementById("loginusername").innerHTML = document.getElementById("usernameone").value;
                            }
                            // window.location = 'PatientHome.html';
                            // alert(localStorage.OnlineReguserid);
                            var remarks = "Login-Page" + "/ Username :" + document.getElementById("usernameone").value + " " + "- Login Successful";
                            var response = "Successful";
                            var strQuery5 = "exec User_loginregister @opt=26,@userid=\'" + item.iUser_id + "\',@confno=0,@regno=0,@LastIpAddr=\'" + document.getElementById("ipaddress").value + "\',  @response=\'" + response + "\', @remarks=\'" + remarks + "\'";
                            // alert(strQuery5)
                            var strCon = "BBOnline";
                            saveLogActivity(strQuery5, strCon);
                            var strQuery4 = "exec User_loginregister @opt=25,@userid=\'" + item.iUser_id + "\'";
                            CheckUserExistInLog(strQuery4, strCon, item.iUser_id);
                        });
                    }
                    else {
                        localStorage.removeItem("username");
                        localStorage.removeItem("userid");
                        localStorage.removeItem("password");
                        document.getElementById("uname").innerHTML = "";

                        var remarks = "Login-Page" + "/ Username :" + document.getElementById("usernameone").value + "  " + "Password :" + document.getElementById("passwordone").value + "- Login UnSuccessful";
                        var response = "UnSuccessful";
                        var strQuery4 = "exec User_loginregister @opt=26,@userid=1,@confno=0,@regno=0,@LastIpAddr=\'" + document.getElementById("ipaddress").value + "\',  @response=\'" + response + "\', @remarks=\'" + remarks + "\'";
                        var strCon = "BBOnline";
                        saveLogActivity(strQuery4, strCon);
                        //if (localStorage.portalappointmenthide == "hidedoctorheader") {
                        //}
                        //else {
                        alert("Username or Password does not exist");
                        //}
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function saveLogActivity(strQuery, strCon) {
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    // alert("tf")
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //LOGIN-Check Exist User
        function CheckUserExistInLog(strQuery, strCon, userid) {
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    //alert(response.d);
                    if (response.d != "[]") {
                        $.each(combo, function (i, item) {
                            // alert(userid)
                            var strQuery4 = "exec User_loginregister @opt=5,@userid=\'" + userid + "\'";
                            //alert(strQuery4)
                            var strCon = "BBOnline";
                            saveLogTable(strQuery4, strCon);
                        });
                    }
                    else {
                        var strQuery4 = "exec User_loginregister @opt=3,@userid=\'" + userid + "\',@LoginSuccess=1";
                        // alert(strQuery4)
                        var strCon = "BBOnline";
                        saveLogTable(strQuery4, strCon);
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function saveLogTable(strQuery, strCon) {
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    var strCon2 = "BBOnline";
                    var strQuery7 = "exec User_loginregister @opt=24,@onuserid=\'" + localStorage.OnlineReguserid + "\'";
                    loadlistuser(strQuery7, strCon2);
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //load patient list table against User ID

        function loadlistuser(strQuery, strCon) {
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    var data = [];
                    $.each(combo, function (i, item) {
                        data.push([item.patid]);
                    });
                    var strCon2 = "BB_CONSTR";
                    var strQuery5 = "exec Pat_Portal_UserActivitylist @opt=1,@Patid=\'" + data + "\'";
                    loadlisttable(strQuery5, strCon2);
                },
                failure: function (msg) {
                    alert(msg);
                }
            });

        }

        //Load Login User List
        function loadlisttable(strQuery, strCon) {
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    debugger;
                    //$("#spnGetdet").html(response.d);
                    if (response != null) {
                        var combo = eval(response);
                        var html = "";
                        var trHTML = '';
                        $('#regnoul')
                            .find('tr')
                            .remove()
                            .end()
                        var patientname = "";
                        var address = "";
                        var city = "";
                        var mobile = "";
                        var email = "";
                        var dist = "";
                        var state = "";
                        var country = "";
                        var counter = 0
                        $.each(combo, function (i, item) {
                            var link = '\'PatientHomeDtl.html\'';
                            var RegNo = '\'' + item.regno + '\'';
                            patientname = "'" + item.patname + "' ";
                            address = "'" + item.address1 + "' ";
                            city = "'" + item.city + "' ";
                            mobile = "'" + item.mobileno + "'";
                            email = "'" + item.email + "' ";
                            dist = "'" + item.dist + "' ";
                            state = "'" + item.state + "' ";
                            country = "'" + item.country + "' ";
                            var rowcount = counter++
                            var registerno = "'" + item.regno + "'";
                            if (isredirectfromnonlogin != 1) {
                                if (localStorage.RegNoReview == item.regno) {
                                    trHTML = '';
                                    trHTML += '<tr class="odd gradeX"> <td>' + item.regno + '</td><td>' + item.patname + '</td><td style="display:none">' + item.usercreatedt + '</td><td style="display:none">' + item.DOB + '</td><td style="width:20px; height:20px; display:none"> <i style=" color:green;cursor:pointer" onclick="javascript:fnMenuLink(' + link + ',' + RegNo + ');"  class="glyphicon glyphicon-home"><a href="javascript:fnMenuLink(' + link + ',' + RegNo + ');"></a>  </i> </td> <td align="center"> <button type="submit" onclick="registeredhistoryclick(' + item.patid + ',' + registerno + ',' + patientname + ',' + address + ',' + city + ',' + mobile + ',' + email + ',' + dist + ',' + state + ',' + country + ',' + rowcount + ')" id=' + rowcount + ' class="btn yellow-casablanca more" data-toggle="modal"   style="border-radius:4px; height:30px; padding-top:0px; padding-bottom:0px; text-transform:none;"><div class="hor-menu hidden-sm hidden-xs">Confirm</div><div class="hor-menu visible-sm visible-xs"><i class="fa fa-clock-o"></i></div></button></li></td></tr>';
                                    $("#regnoul tr").remove();
                                    return false;
                                }
                                else {
                                    trHTML += '<tr class="odd gradeX"> <td>' + item.regno + '</td><td>' + item.patname + '</td><td style="display:none">' + item.usercreatedt + '</td><td style="display:none">' + item.DOB + '</td><td style="width:20px; height:20px; display:none"> <i style=" color:green;cursor:pointer" onclick="javascript:fnMenuLink(' + link + ',' + RegNo + ');"  class="glyphicon glyphicon-home"><a href="javascript:fnMenuLink(' + link + ',' + RegNo + ');"></a>  </i> </td> <td align="center"> <button type="submit" onclick="registeredhistoryclick(' + item.patid + ',' + registerno + ',' + patientname + ',' + address + ',' + city + ',' + mobile + ',' + email + ',' + dist + ',' + state + ',' + country + ',' + rowcount + ')" id=' + rowcount + ' class="btn yellow-casablanca more" data-toggle="modal"   style="border-radius:4px; height:30px; padding-top:0px; padding-bottom:0px; text-transform:none;"><div class="hor-menu hidden-sm hidden-xs">Confirm</div><div class="hor-menu visible-sm visible-xs"><i class="fa fa-clock-o"></i></div></button></li></td></tr>';
                                }
                            } else {
                                trHTML += '<tr class="odd gradeX"> <td>' + item.regno + '</td><td>' + item.patname + '</td><td style="display:none">' + item.usercreatedt + '</td><td style="display:none">' + item.DOB + '</td><td style="width:20px; height:20px; display:none"> <i style=" color:green;cursor:pointer" onclick="javascript:fnMenuLink(' + link + ',' + RegNo + ');"  class="glyphicon glyphicon-home"><a href="javascript:fnMenuLink(' + link + ',' + RegNo + ');"></a>  </i> </td> <td align="center"> <button type="submit" onclick="registeredhistoryclick(' + item.patid + ',' + registerno + ',' + patientname + ',' + address + ',' + city + ',' + mobile + ',' + email + ',' + dist + ',' + state + ',' + country + ',' + rowcount + ')" id=' + rowcount + ' class="btn yellow-casablanca more" data-toggle="modal"   style="border-radius:4px; height:30px; padding-top:0px; padding-bottom:0px; text-transform:none;"><div class="hor-menu hidden-sm hidden-xs">Confirm</div><div class="hor-menu visible-sm visible-xs"><i class="fa fa-clock-o"></i></div></button></li></td></tr>';
                            }

                        });
                        $("#currentuserhide").css("display", "none");
                        if (isredirectfromnonlogin == 1) {
                            $("#usersection").css("display", "");
                            $("#userchoosesection").css("display", "");
                        } else {
                            $("#usersection").css("display", "none");
                            $("#userchoosesection").css("display", "none");
                        }

                        $("#patientlisthide").css("display", "");
                        $('#regnoul').append(trHTML);
                        document.getElementById("usernameone").value = "";
                        document.getElementById("passwordone").value = "";
                        //($("#hiddpaymentdetails").html()).insertBefore("#exsistinglisthide");
                    } else {
                        $('#regnoul')
                            .find('tr')
                            .remove()
                            .end()
                        $("#currentuserhide").css("display", "none");
                        $("#patientlisthide").css("display", "");
                        var trHTML = '<tr><td colspan="6"> No Data Found</td></tr>'
                        $('#regnoul').append(trHTML);
                        document.getElementById("usernameone").value = "";
                        document.getElementById("passwordone").value = "";
                    }

                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Fix Appointment For Login Patient
        function registeredhistoryclick(patid, regno, patientname, address, city, mobile, email, dist, state, country, rowcount) {
            document.getElementById("txtpatientname").value = patientname;
            document.getElementById("txtemailid").value = email;
            document.getElementById("txtphonenumber").value = mobile;
            if ($("input[type='radio'][name='radiopaymentbtn']:checked").length == 0) {
                alert("Please select the payment mode")
            }
            else {
                document.getElementById(rowcount).disabled = true;
                document.getElementById("rowcounr").innerHTML = "";
                document.getElementById("rowcounr").innerHTML = rowcount;
                //            $("tr").click(function () {
                //                //$(this).closest("tr").siblings().removeClass("highlighted1");
                //                // $(this).toggleClass("highlighted1");
                //                $(this).removeClass("highlighted1");
                //                $(this).addClass("highlighted1");
                //            })

                GetCityPincode(city);
                document.getElementById("newuserrad").checked = false;
                document.getElementById("currentuserrad").checked = true;
                document.getElementById("Exsistingregpat").checked = false;

                document.getElementById("addresspay").innerHTML = "";
                document.getElementById("citypay").innerHTML = "";
                document.getElementById("mobilepay").innerHTML = "";
                document.getElementById("emailpay").innerHTML = "";

                document.getElementById("distpay").innerHTML = "";
                document.getElementById("statepay").innerHTML = "";
                document.getElementById("countrypay").innerHTML = "";

                document.getElementById("createuserreview").innerHTML = "";
                document.getElementById("createuserreview").innerHTML = "OK";

                document.getElementById("usernameone").value = "";
                document.getElementById("passwordone").value = "";

                document.getElementById("patientid").innerHTML = "";
                document.getElementById("patientregno").innerHTML = "";
                document.getElementById("appointpatientname").innerHTML = "";

                document.getElementById("addresspay").innerHTML = address;
                document.getElementById("citypay").innerHTML = city;
                document.getElementById("mobilepay").innerHTML = mobile;
                document.getElementById("emailpay").innerHTML = email;

                document.getElementById("distpay").innerHTML = dist;
                document.getElementById("statepay").innerHTML = state;
                document.getElementById("countrypay").innerHTML = country;

                document.getElementById("patientid").innerHTML = patid;
                document.getElementById("patientregno").innerHTML = regno;
                document.getElementById("appointpatientname").innerHTML = patientname;
                $("#newuserhide").css("display", "none");
                $("#currentuserhide").css("display", "none");
                $('#regnoul').on('click', 'tr', function (e) {
                    var firstCellText = $("td:first", this).text();
                    var fourthCellText = $("td:eq(3)", this).text();
                    var d = fourthCellText.split("-")[2];
                    localStorage.RegNoReview = firstCellText;
                    localStorage.DobReview = d;
                });
                var mobilenumber = "'" + mobile + "'";
                if (mobilenumber == "'0000000000'") {
                    mobilenumber = "";
                }
                else {
                }
                var mobilelength = mobilenumber.length;
                if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email) && mobilelength == 12) {
                    $("#hiddenmailupdate").css("display", "none");
                    $("#hiddenmailsuccessmsg").css("display", "none");
                    //mycontinuesave(patid, regno, rowcount);
                    //ReviewRegistrationSave(patid)
                    PatientPortalReviewRegistration(patid, mobile)
                }
                else {
                    document.getElementById("updatemailid").value == "";
                    document.getElementById("updatemobileno").value = "";
                    if (mobilelength < 12) {
                        $("#hiddenmailupdate").css("display", "");
                        $('#updatemobileno').focus();
                        $("#updatemobileno").css({ "border-color": "red" });
                        $("#errorvalidateemail").css("display", "");
                        $('#hiddenmailupdate').focus();
                        $("#mobilelabelnone").css("display", "");
                        $("#mobileinputnone").css("display", "");
                    }
                    else {
                        document.getElementById("updatemobileno").value = mobile;
                    }
                    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {

                        document.getElementById("updatemailid").value = email;
                    }
                    else {
                        //alert("Registered email ID is incorrect,please update correct mail id and then fix your appointment.")
                        $("#hiddenmailupdate").css("display", "");
                        $('#updatemailid').focus();
                        $("#updatemailid").css({ "border-color": "red" });
                        $("#errorvalidateemail").css("display", "");
                        $('#hiddenmailupdate').focus();
                        $("#maillabelnone").css("display", "");
                        $("#mailinputnone").css("display", "");
                    }
                }
            }
        }

        function Logout() {
            $("#currentuserhide").css("display", "");
            $("#patientlisthide").css("display", "none");
            document.getElementById("usernameone").value = "";
            document.getElementById("passwordone").value = "";
            document.getElementById("newuserrad").checked = false;
            document.getElementById("currentuserrad").checked = true;
            document.getElementById("Exsistingregpat").checked = false;
            $("#newuserhide").css("display", "none");
            $("#currentuserhide").css("display", "");
            $("#existregpatient").css("display", "none");
            $("#patientlisthide").css("display", "none");
            $("#exsistinglisthide").css("display", "none");
        }
        //Initial Search function for given Reg No & mobile or data of birth
        function ExsistRegFunction() {

            if (($("#regno").val().length > 0) && (($("#phonenumber").val().length > 0) || ($("#dob").val().length > 0))) {
                ////   $("#existregpatient").css("display", "none");
                //document.getElementById("Exsistingregpat").checked = false;
                document.getElementById("Exsistingregpat").setAttribute("checked", "checked");
                ////    Exsistingreguser();
                var search = document.getElementById("regno").value;
                var strCon = "BB_CONSTR";
                var str1 = "exec FO_Online_ReviewReg @opt=1,@regNo='"
                var str2 = search;
                var str10 = "'";
                var str3 = ",@Mobile='";
                var str4 = document.getElementById("phonenumber").value;
                var strQuery = "exec FO_Online_ReviewReg @opt=1,@regno=\'" + document.getElementById("regno").value + "\',@mobile=\'" + str4 + "\',@year=\'" + document.getElementById("dob").value + "\'";
                console.log("regpat quert : " + strQuery)
                LoadRegData(strQuery, strCon);
            }
            else {
                alert("Enter registration number and [ Phone number or Bookdate ]");
            }
        }


        //Fix Appointment for review patient (Reg No & Mobile OR DOB)
        function Exsistregisteredhistoryclick(patid, regno, patientname, address, city, mobile, email, state, country, rowcount) {
            document.getElementById("txtpatientname").value = patientname;
            document.getElementById("txtemailid").value = email;
            document.getElementById("txtphonenumber").value = mobile;
            if ($("input[type='radio'][name='radiopaymentbtn']:checked").length == 0) {
                alert("Please select the payment mode")
            }
            else {
                document.getElementById(rowcount).disabled = true;
                document.getElementById("rowcounr").innerHTML = "";
                document.getElementById("rowcounr").innerHTML = rowcount;
                GetCityPincode(city);
                document.getElementById("newuserrad").checked = false;
                document.getElementById("currentuserrad").checked = false;
                document.getElementById("Exsistingregpat").checked = true;

                document.getElementById("addresspay").innerHTML = "";
                document.getElementById("citypay").innerHTML = "";
                document.getElementById("mobilepay").innerHTML = "";
                document.getElementById("emailpay").innerHTML = "";

                document.getElementById("statepay").innerHTML = "";
                document.getElementById("countrypay").innerHTML = "";

                document.getElementById("usernameone").value = "";
                document.getElementById("passwordone").value = "";

                document.getElementById("patientid").innerHTML = "";
                document.getElementById("patientregno").innerHTML = "";
                document.getElementById("appointpatientname").innerHTML = "";

                document.getElementById("addresspay").innerHTML = address;
                document.getElementById("citypay").innerHTML = city;
                document.getElementById("mobilepay").innerHTML = mobile;
                document.getElementById("emailpay").innerHTML = email;

                document.getElementById("statepay").innerHTML = state;
                document.getElementById("countrypay").innerHTML = country;

                document.getElementById("patientid").innerHTML = patid;
                document.getElementById("patientregno").innerHTML = regno;
                document.getElementById("appointpatientname").innerHTML = patientname;

                $("#newuserhide").css("display", "none");
                $("#currentuserhide").css("display", "none");
                $("#existregpatient").css("display", "none");
                $('#tblexsistingpat').on('click', 'tr', function (e) {
                    var firstCellText = $("td:first", this).text();
                    var fourthCellText = $("td:eq(3)", this).text();
                    var d = fourthCellText.split("-")[2];
                    localStorage.RegNoReview = firstCellText;
                    localStorage.DobReview = d;
                });
                var mobilenumber = "'" + mobile + "'";
                if (mobilenumber == "'0000000000'") {
                    mobilenumber = "";
                }
                else {
                }
                var mobilelength = mobilenumber.length;
                if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email) && mobilelength == 12) {
                    $("#hiddenmailupdate").css("display", "none");
                    $("#hiddenmailsuccessmsg").css("display", "none");
                    //mycontinuesave(patid, regno, rowcount);
                    //ReviewRegistrationSave(patid)
                    PatientPortalReviewRegistration(patid, mobile)
                }
                else {
                    document.getElementById("updatemailid").value == "";
                    document.getElementById("updatemobileno").value = "";

                    if (mobilelength < 12) {
                        $("#hiddenmailupdate").css("display", "");
                        $('#updatemobileno').focus();
                        $("#updatemobileno").css({ "border-color": "red" });
                        $("#errorvalidateemail").css("display", "");
                        $('#hiddenmailupdate').focus();
                        $("#mobilelabelnone").css("display", "");
                        $("#mobileinputnone").css("display", "");
                    }
                    else {
                        document.getElementById("updatemobileno").value = mobile;
                    }
                    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
                        document.getElementById("updatemailid").value = email;
                    }
                    else {
                        //alert("Registered email ID is incorrect,please update correct mail id and then fix your appointment.")
                        $("#hiddenmailupdate").css("display", "");
                        $('#updatemailid').focus();
                        $("#updatemailid").css({ "border-color": "red" });
                        $("#errorvalidateemail").css("display", "");
                        $('#hiddenmailupdate').focus();
                        $("#maillabelnone").css("display", "");
                        $("#mailinputnone").css("display", "");
                    }
                }
            }
        }

        /*function ReviewRegistrationSave(patid)
        {
            var currentTime = new Date()
            var hours = currentTime.getHours()
            var minutes = currentTime.getMinutes()
            if (minutes < 10)
                minutes = "0" + minutes
            var suffix = "1";
            if (hours >= 12) {
                suffix = "2";
                hours = hours - 12;
            }
            if (hours == 0) {
                hours = 12;
            }
            var companyid=localStorage.ApiURLcompanyid;
            var strQuery = "exec ReviewReg_BillingService @PatientType=N'1',@DoctorId=N\'" + document.getElementById("hiddendoctorid").innerHTML + "\',@BookID=N'1',@SessionId=N\'" + suffix + "\',@ClassId=N'1',@UnitId=N'0',@PriceLstId=N'1',@BillingRequired=N'3',@DeptId=N\'" + document.getElementById("departmentid").innerHTML + "\',@ConcessionSourceNameId=N'0',@TokenNo=N'0',@PatId=N\'" + patid + "\',@BookDt=N\'" + document.getElementById('calendarclickvalue').value + "\',@RCMIntegrationRequired=N'0',@CompanyId=N\'" + companyid + "\'"
            var strCon = "BB_CONSTR";

            console.log(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon,Companyid:localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var value = "";
                    $.each(combo, function (index, item) {

                        var amount=item.ServiceAmount;

                        document.getElementById("hidreviewserviceamount").value=item.ServiceAmount;
                        document.getElementById("hidreviewserviceheaderid").value=item.HeaderId;
                        document.getElementById("hidreviewserviceid").value=item.ServiceId;

                            document.getElementById("reviewamountvalue").innerHTML = "";
                            document.getElementById("modalamount").innerHTML = "";
                            document.getElementById("amount").innerHTML = "";
                            document.getElementById("regamount").innerHTML = "";

                            document.getElementById("reviewamountvalue").innerHTML = amount;
                            document.getElementById("modalamount").innerHTML = amount;
                            document.getElementById("regamount").innerHTML = amount;
                            document.getElementById("amount").innerHTML = amount;

                            var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                            var strCon = "BB_CONSTR";
                            //var strQuery = "exec FO_Online_ReviewReg_Save @patID=" + document.getElementById("patientid").innerHTML + ", @bookID=1, @bookDt=\'" + document.getElementById('selectdatemodal').innerHTML + "\',@session=" + suffix + ",@deptID=" + document.getElementById("deptidmodal").innerHTML + ",@docID=" + doctorid + ",@userID=\'" + userid + "\',@billAmt=" + amount + ",@SchduleId=" + document.getElementById("slotidmodal").innerHTML + " ";

                            var companyid=localStorage.ApiURLcompanyid;
                            var userid=localStorage.portaluserid;
                            var consultationcharge="" + item.HeaderId + "~" + item.ServiceId + "~" + item.ServiceAmount + "~0~0~1~0~1~1~1~" + item.ServiceAmount + "~0~0~0|";
                            var strQuery ="exec OnlineConsulting_New_Review_15SE @PatOPIdRequired=1,@CompanyId=N\'" + companyid + "\',@UserId=N\'" + userid + "\',@IPAddress=N'::1',@Sal=N' ',@LastName=N' ',@Gender=N' ',@TransGender=N' ',@Age=N' ',@PresentAddress=N' ',@PresentCityId=N' ',@PresentPinCode=N' ',@CountryCode=N' +91',@CountryFlag=N'iti-flag in',@MobileNo=N'9895695659',@BookDt=N\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=N'2',@DoctorId=N\'" + doctorid + "\',@WhatsAppNo=N'',@WhatsAppCountryCode=N'',@whatsAppCountryFlag=N'',@PatId=N\'" + document.getElementById("patientid").innerHTML + "\',@DocAppointmentScheduleId=N\'" + document.getElementById("slotidmodal").innerHTML + "\',@BookingPatTypeId=N'2',@billAmt=N\'" + item.ServiceAmount + "\',@BillDtl=N\'" + consultationcharge + "\'"
                            //alert(strQuery)
                            save(strQuery, strCon, localStorage.OnlineReguserid, patid, regno);


                    });

                },
                failure: function (msg) {
                    alert(msg);
                }
            });
       }
        // Final Save
        function save(strQuery, strCon, userid, patid, regno) {
            console.log(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon,Companyid:localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var billno = "";

                    document.getElementById("regdoctorname").innerHTML = "";
                    document.getElementById("regappointment").innerHTML = "";
                    document.getElementById("regappointmentno").innerHTML = "";

                    document.getElementById("apppatientname").innerHTML = "";
                    document.getElementById("reviewbillnumber").innerHTML = "";
                    document.getElementById("reviewdocappointmentid").innerHTML = "";

                    document.getElementById("mailmessage").innerHTML = "";


                    localStorage.RegNoReview = "";
                    localStorage.DobReview = "";
                    cleartimercount();
                    // GetamountReviewPatient(patid)
                    $.each(combo, function (index, item) {
                        console.log(item.ReturnMessage)
                        var details=item.ReturnMessage
                        alert(item.ReturnMessage)
                        console.log(item.ReturnMessage)
                        var rtnvalue=details.split(":")[0];
                        if(rtnvalue!='Error ' && rtnvalue!='Error' && item.ReturnMessage != null)
                        {
                        var deatil=item.ReturnMessage;
                        var patid=item.PatId;
                        var opid=item.OPID;
                        var tokennodetail=deatil.split("/")[0];
                        var tokenno=tokennodetail.split(":")[1];
                        var Appointmentdetail=deatil.split("/")[1];
                        var appdate=Appointmentdetail.split(":")[1];
                        var Timedetail=deatil.split("/")[2];
                        var apptime=Timedetail.split(":")[1];
                        document.getElementById("reviewiopid").innerHTML = opid;

                        document.getElementById("hidreviewpayopid").value = opid;
                        document.getElementById("hidreviewpaypatid").value = patid;

                            alert("Record saved successfully. "+item.ReturnMessage+" Registration details sent to your registered Email id.");
                            //SendMailRegister(document.getElementById("appointpatientname").innerHTML, document.getElementById("emailpay").innerHTML, regno, document.getElementById("doctornamemodal").innerHTML, document.getElementById("department").innerHTML, splitdate, tokenno, document.getElementById("slotmodal").innerHTML, billno, packagename)
                            CompleteSchedleReserve(patid, opid);
                            document.getElementById("mailmessage").innerHTML = "Your Registration Is Done. You Can Proceed Your Payment Now."
                            document.getElementById("tokennumber").innerHTML = tokennodetail;
                            document.getElementById("appointmentdate").innerHTML = Appointmentdetail;
                            document.getElementById("slottime").innerHTML = Timedetail;
                            document.getElementById("regdoctorname").innerHTML = document.getElementById("doctornamemodal").innerHTML;
                            document.getElementById("regappointment").innerHTML = document.getElementById("slotmodal").innerHTML;
                            document.getElementById("regappointmentno").innerHTML = document.getElementById("patientregno").innerHTML;
                            document.getElementById("apppatientname").innerHTML = document.getElementById("appointpatientname").innerHTML;

                            fnContinueReviewRegSave(opid, patid, parseInt(document.getElementById("hidreviewserviceamount").value));

                            $("#hidregnofornew").css("display","");
                            $("#btnnewpay").css("display","none");
                            $("#btnreviewpay").css("display","none");
                            //$('#responsivehospitalcensus').modal('hide');
                            $("#hidregistrationcontant").css("display","");

                            $("#registrationdetailpayment").css("display","");


                        }
                        else
                        {
                            alert(item.ReturnMessage)
                        }
                    });

                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }*/

        function fnContinueReviewRegSave(opid, patid, serviceamount) {
            document.getElementById("reviewtermscondition").checked = true;
            //payrunTimer();
            //fnpayment(2);
            document.getElementById("btnreviewpay").disabled = false;
            //fnHDFCPaypayment(opid, patid, serviceamount)
        }
        // Update Mail for Review Patient
        function UpdateMail() {
            var mobilenumber = "'" + document.getElementById("updatemobileno").value + "'";
            var mobilelength = mobilenumber.length;
            document.getElementById("emailpay").innerHTML = "";
            document.getElementById("mobilepay").innerHTML = "";
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(document.getElementById("updatemailid").value) && mobilelength == 12) {
                document.getElementById("emailpay").innerHTML = document.getElementById("updatemailid").value;
                document.getElementById("mobilepay").innerHTML = document.getElementById("updatemobileno").value;
                var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=9,@patid=\'" + document.getElementById("patientid").innerHTML + "\',@email=\'" + document.getElementById("updatemailid").value + "\',@mobileno=\'" + document.getElementById("updatemobileno").value + "\'";
                var strCon = "BB_CONSTR";
                $.ajax({
                    url: '../api/Dataset',
                    type: 'POST',
                    data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                    dataType: 'json',
                    success: function (response) {
                        //$("#spnGetdet").html(response.d);
                        var combo = eval(response);
                        var html = "";
                        document.getElementById("mailmessage").innerHTML = "";
                        document.getElementById("mailmessage").innerHTML = "Successfully Updated."
                        $("#hiddenmailupdate").css("display", "none");
                        $("#hiddenmailsuccessmsg").css("display", "");
                        alert("Successfully Updated.");
                        document.getElementById("emailpay").innerHTML = document.getElementById("updatemailid").value;
                        //mycontinuesave(document.getElementById("patientid").innerHTML, document.getElementById("patientregno").innerHTML, document.getElementById("rowcounr").innerHTML);
                        //ReviewRegistrationSave(document.getElementById("patientid").innerHTML)
                        PatientPortalReviewRegistration(document.getElementById("patientid").innerHTML, document.getElementById("updatemobileno").value)
                    },
                    failure: function (msg) {
                        alert(msg);
                    }
                });

            }
            else {
                if (mobilelength < 12) {
                    $("#updatemobileno").css({ "border-color": "red" });
                }
                else {
                }
                if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(document.getElementById("updatemailid").value)) {
                }
                else {
                    $("#updatemailid").css({ "border-color": "red" });
                }
            }
        }
        //get pincode
        function GetCityPincode(city) {
            var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=7,@city=\'" + city + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                type: "POST",
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("pincodepay").innerHTML = ""
                    $.each(combo, function (index, item) {
                        document.getElementById("pincodepay").innerHTML = item.pincode;
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //Update slot Count=1 when the Registration is Done for review patient
        function CompleteSchedleReserve(patid, opid) {
            var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=2,@patid=\'" + patid + "\',@iopid=\'" + opid + "\',@schedulereverseid=\'" + document.getElementById("schedulereserveid").innerHTML + "\'";
            var strCon = "BB_CONSTR";

            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //new registration
        /*function myFunction()
        {
            var userid = "1";
            var maritaltext = "s";
            var doctorid = document.getElementById("hiddendoctorid").innerHTML;
            var address = document.getElementById("address").value;
            var cityid = document.getElementById("city").value;
            var maritalstatusid = "0";

            var DOB = document.getElementById('DOB').value;

            var y = DOB.split("-")[0];
            var m = DOB.split("-")[1];
            var d = DOB.split("-")[2];
            var DOBB = d + '-' + m + '-' + y;

            var gender = "";
            if (document.getElementById("Male").checked == true) {

                gender = "M";
            }
            else {
                gender = "F";
            }

            if (document.getElementById("patname").value == "") {
                alert("Please enter the paient name");
            }
            else if (document.getElementById("email").value == "") {
                alert("Please enter the mail id");
            }
            else if (document.getElementById("mobile").value == "") {
                alert("Please enter the mobile number");
            }
            else if (document.getElementById("DOB").value == "") {
                alert("Please enter the DOB");
            }
            else if (document.getElementById("age").value == "") {
                alert("Please enter the age");
            }
            else if (document.getElementById("Male").checked == false && document.getElementById("Female").checked == false) {
                alert("Please enter the Gender");
            }
            else if (document.getElementById("address").value == "") {
                alert("Please enter the address");
            }
            else if (document.getElementById("city").value == "") {
                alert("Please select the city");
            }
            else if (document.getElementById("PersonFill").value == "") {
                alert("Please enter the patient relation name");
            }
            else {
                document.getElementById("btnmodal").disabled = false;
                var userid = 1;
                var amount = document.getElementById("amount").innerHTML;
                var slot = document.getElementById("slotidmodal").innerHTML;
                var companyid=localStorage.ApiURLcompanyid;
                var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                var address = document.getElementById("address").value;
                var cityid = document.getElementById("city").value;
                var maritalstatusid = "0";
                var DOB = document.getElementById('DOB').value;
                var y = DOB.split("-")[0];
                var m = DOB.split("-")[1];
                var d = DOB.split("-")[2];
                var DOBB = d + '-' + m + '-' + y;
                if (document.getElementById("Male").checked == true) {
                gender = "M";
                }
                else {
                gender = "F";
                }

                //@BillingDtl=N'4~88542~1~150~150~0~0~0~0|',
                //HeaderId,ServiceId,Qty,ServRate,ServAmt,bstate(0),ConcessionType,ConcessionValue,ConcessionAmt

                var regbilldetail="" + document.getElementById("hidserviceheaderid").value + "~" + document.getElementById("hidserviceid").value + "~" + document.getElementById("hidserviceamount").value + "~0~0~1~0~1~1~1~" + document.getElementById("hidserviceamount").value + "~0~0~0|"
                var consultationcharge="" + document.getElementById("hidcosultationheaderid").value + "~" + document.getElementById("hidcosultationserviceid").value + "~" + document.getElementById("hidcosultationamount").value + "~0~0~1~0~1~1~1~" + document.getElementById("hidcosultationamount").value + "~0~0~0|";

                var strQuery = "exec OnlineConsulting_New_Review_15SE @PatOPIdRequired=1,@CompanyId=N\'" + companyid + "\',@UserId=N\'" + userid + "\',@IPAddress=N'::1',@Sal=N\'" + $("#sal option:selected").text() + "\',@LastName=N\'" + document.getElementById("patname").value + "\',@Gender=N\'" + gender + "\',@TransGender=N' ',@Age=N\'" + document.getElementById("age").value + "\',@PresentAddress=N\'" + address + "\',@PresentCityId=N\'" + cityid + "\',@PresentPinCode=N\'" + document.getElementById("temppincode").value + "\',@CountryCode=N' +91',@CountryFlag=N'iti-flag in',@MobileNo=N\'" + document.getElementById("mobile").value + "\',@BookDt=N\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=N'2',@DoctorId=N\'" + doctorid + "\',@WhatsAppNo=N'',@WhatsAppCountryCode=N'',@whatsAppCountryFlag=N'',@PatId=N'',@DocAppointmentScheduleId=N\'" + slot + "\',@BookingPatTypeId=N'1',@billAmt=N\'" + amount + "\',@BillDtl=N\'" + regbilldetail+consultationcharge + "\'"
                //alert(strQuery)
                SaveNewRegistration(strQuery, strCon, userid);
            }
        }

        //Save New Registration after temprary araegistration is completed

        function SaveNewRegistration(strQuery, strCon, userid) {
            console.log(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon,Companyid:localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("newbillnumber").innerHTML = "";
                    document.getElementById("newiopid").innerHTML = "";
                    alert(response)
                    $.each(combo, function (index, item) {

                        console.log(item.ReturnMessage)
                        var details=item.ReturnMessage
                        alert(item.ReturnMessage)
                        console.log(item.ReturnMessage)
                        var rtnvalue=details.split(":")[0];
                        if(rtnvalue!='Error ' && rtnvalue!='Error' && item.ReturnMessage != null)
                        {
                        var deatil=item.ReturnMessage;
                        var patid=item.PatId;
                        var opid=item.OPID;
                        var tokennodetail=deatil.split("/")[0];
                        var tokenno=tokennodetail.split(":")[1];
                        var Appointmentdetail=deatil.split("/")[1];
                        var appdate=Appointmentdetail.split(":")[1];
                        var Timedetail=deatil.split("/")[2];
                        var apptime=Timedetail.split(":")[1];


                        alert("Record saved successfully. "+item.ReturnMessage+"");

                        document.getElementById("newiopid").value = opid;
                        document.getElementById("hidnewopid").value = opid;
                        document.getElementById("hidnewpatientid").value =patid;
                        document.getElementById("tokennumber").innerHTML = tokennodetail;
                        document.getElementById("appointmentdate").innerHTML = Appointmentdetail;
                        document.getElementById("slottime").innerHTML = Timedetail;
                        document.getElementById("regdoctorname").innerHTML = document.getElementById("doctornamemodal").innerHTML;
                        document.getElementById("regappointment").innerHTML = document.getElementById("slotmodal").innerHTML;
                        document.getElementById("regappointmentno").innerHTML = document.getElementById("patientregno").innerHTML;
                        document.getElementById("apppatientname").innerHTML = document.getElementById("patname").value;
                        document.getElementById("regamount").innerHTML = document.getElementById("hidserviceamount").value;

                        $("#hidregnofornew").css("display","none");
                        $("#btnnewpay").css("display","");
                        $("#btnreviewpay").css("display","none");
                        $("#hidregistrationcontant").css("display","none");
                        $("#registrationdetailpayment").css("display","");
                        CompleteSchedleReserve(patid, opid)
                        //fnSaveUserRegister(opid,splitRegNo)
                        }
                        else
                        {
                            alert(item.ReturnMessage)
                        }
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }*/

        function mailfocus() {
            $("#updatemailid").css({ "border-color": "#ddd" });
            $("#errorvalidateemail").css("display", "none");
        }
        function mobilefocus() {
            $("#updatemobileno").css({ "border-color": "#ddd" });
            $("#errorvalidateemail").css("display", "none");
        }
        //Cancel button click
        function cancel() {
            document.getElementById("regno").value = "";
            document.getElementById("phonenumber").value = "";
            document.getElementById("dob").value = "";
            $('#tblexsistingpat')
                .find('tr')
                .remove()
                .end()
            //localStorage.RegNoReview = "";
            //localStorage.DobReview = "";
            //window.location = 'Review.html';
        }
        function fnHDFCPaypayment(value) {
            //new registration
            if (value == 1) {
                //document.getElementById("btnnewpay").disabled = false;
                window.open('ccavRequestHandler.aspx?action=neworder&OPID=' + document.getElementById("hidnewopid").value + '&orderidvalue=' + document.getElementById("hidnewpatientid").value + '&amountvalue=' + parseInt(document.getElementById("hidserviceamount").value) + '');
                return false;
            }
            //review registration
            if (value == 2) {
                //document.getElementById("btnreviewpay").disabled = false;
                window.open('ccavRequestHandler.aspx?action=neworder&OPID=' + document.getElementById("hidreviewpayopid").value + '&orderidvalue=' + document.getElementById("hidreviewpaypatid").value + '&amountvalue=' + parseInt(document.getElementById("hidreviewserviceamount").value) + '');
                return false;
            }
        }


        //Calculate age with respect to DOB
        function CalculateAge() {
            var curYear = new Date().getUTCFullYear();
            var DOB = document.getElementById('DOB').value;
            var d = DOB.split("-")[2];
            var age = curYear - d;
            document.getElementById('age').value = age;
            if (document.getElementById('age').value == 'NaN') {
                document.getElementById('age').value = "";
            }
            else {
            }
        }

        //Calculate DOB with respect to age
        function CalculateDOB() {
            var yearNow = new Date().getUTCFullYear();
            var age = yearNow - document.getElementById('age').value;
            var now = new Date();
            var dd = now.getDate();
            var mm = now.getMonth() + 1;
            if (dd < 10) {
                dd = '0' + dd
            }
            if (mm < 10) {
                mm = '0' + mm
            }
            var someFormattedDate = dd + '-' + mm + '-' + age;
            document.getElementById('DOB').value = someFormattedDate;
            $('.input-group').datepicker('update', someFormattedDate);
        }

        // state dist country
        function LoadStateDist() {
            var cityid = "";
            cityid = document.getElementById("city").value;
            var strQuery = "exec FOOnline_LoadCombos @opt=60,@Id=\'" + cityid + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    document.getElementById("newdist").innerHTML = "";
                    document.getElementById("newstate").innerHTML = "";
                    document.getElementById("newcountry").innerHTML = "";
                    document.getElementById("newpincode").innerHTML = "";
                    $.each(combo, function (index, item) {
                        document.getElementById("newdist").innerHTML = item.dist;
                        document.getElementById("newstate").innerHTML = item.state;
                        document.getElementById("newcountry").innerHTML = item.country;
                        document.getElementById("newpincode").innerHTML = item.pincode;
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //load pincode
        function LoadPincodeData() {
            var strQuery = "exec FOOnline_LoadCombos @opt=68,@Pincode=\'" + document.getElementById("temppincode").value + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var cityid = "";
                    var stateid = "";
                    var district = "";
                    var countryid = "";
                    if (response == '') {
                        alert("Enter the valid pincode")
                    }
                    else {
                        $.each(combo, function (index, item) {
                            cityid = item.iCity_Id;
                            stateid = item.iState_id;
                            district = item.iDist_id;
                            countryid = item.iCountry_id;
                            $("#city").val(item.iCity_Id);
                        });
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function fnSaveUserRegister(splitpatid, splitRegNo) {
            if (splitpatid == 0) {

                if (document.getElementById("mobile").value != "" && document.getElementById("mobile").value.length >= 10) {
                    $("#hiddenotp").css("display", "");
                    $("#hiddensendotp").addClass('disable');
                    $("#hiddenverify").css("display", "");
                    var userid = 1;
                    if (localStorage.portaluserid == "" || localStorage.portaluserid == undefined) {
                        localStorage.portaluserid = 1;
                        userid = 1;
                    }
                    else {
                        userid = localStorage.portaluserid;
                    }
                    SaveUserAddToMyList(userid, 0, 0, document.getElementById("patname").value, document.getElementById("mobile").value);
                }
                else {
                    alert("Please enter the mobile no")
                }
            }
            else {
                var strCon = "BBOnline";
                var strQuery = "Exec User_loginregister @opt=63,@iPat_id=\'" + splitpatid + "\',@regno=\'" + splitRegNo + "\',@OnlineUsrRegLstid=\'" + document.getElementById("hdnOnlineUser").value + "\',@CompId=\'" + localStorage.ApiURLcompanyid + "\'";
                UpdateUserRegisterlist(strQuery, strCon, 0)
            }
        }
        //save
        function UpdateUserRegisterlist(strQuery, strCon, value) {
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    if (value == 1) {
                        alert("OTP verified successfully")
                        $("#hiddenotptimer").css("display", "none")
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //User
        function SaveUserAddToMyList(userid, lblpatid, lregno, patientname, phone) {
            $.ajax({
                url: '../api/Addnewpatientlist',
                type: 'POST',
                data: { userid: userid, lblpatid: lblpatid, lregno: lregno, patientname: patientname, phone: phone, onlineuserReglistid: localStorage.portaluserid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    console.log(response)
                    var html = "";
                    document.getElementById("hdnOnlineUser").value = combo;
                    SendotpTimer()
                    $("#hiddenotptimer").css("display", "")
                    if (lblpatid == 0) {
                        $("#hiddenverify").css("display", "")
                        $("#hiddenresendotp").css("display", "none")
                        $("#hiddenotp").css("display", "");
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        var timerId = 0;
        function SendotpTimer() {
            $("#hiddenotptimer").css("display", "")
            var timeLeft = 90;
            var elem = document.getElementById('otptimercount');
            timerId = setInterval(countdown, 1000);

            function countdown() {
                if (timeLeft == -1) {
                    clearTimeout(timerId);
                    $("#hiddenresendotp").css("display", "")
                    $("#hiddenotp").css("display", "none");
                    $("#hiddensendotp").css("display", "none");
                    $("#hiddenverify").css("display", "none");
                    document.getElementById('otptimercount').innerHTML = "";
                    $("#hiddenotptimer").css("display", "none")
                } else {
                    elem.innerHTML = "00:" + timeLeft; // + ' seconds remaining';
                    timeLeft--;
                }
            }
        }

        function fnVerifyOTP() {
            var strQuery = "Exec User_loginregister @opt=64,@OnlineUsrRegLstid=\'" + document.getElementById("hdnOnlineUser").value + "\'";
            var strCon = "BBOnline";
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    $.each(combo, function (index, item) {
                        if (document.getElementById("mobileotp").value == item.cMobile_Code) {
                            $("#hiddenverify").css("display", "none")
                            document.getElementById('otptimercount').innerHTML = "";
                            $("#hiddenresendotp").css("display", "none")
                            document.getElementById('btnmodal').disabled = false;
                            $("#hiddenotp").css("display", "none");
                            clearTimeout(timerId);
                            var strCon = "BBOnline";
                            var strQuery = "Exec User_loginregister @opt=63,@OnlineUsrRegLstid=\'" + document.getElementById("hdnOnlineUser").value + "\',@CompId=\'" + localStorage.ApiURLcompanyid + "\'";
                            UpdateUserRegisterlist(strQuery, strCon, 1)
                        }
                        else {
                            alert("OTP is wrong, please enter the valid OTP")
                        }
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function fnResendOTP() {
            if (document.getElementById("mobile").value != "" && document.getElementById("mobile").value.length >= 10) {
                var userid = 1;
                if (localStorage.portaluserid == "" || localStorage.portaluserid == undefined) {
                    localStorage.portaluserid = 1;
                    userid = 1;
                }
                else {
                    userid = localStorage.portaluserid;
                }
                SaveUserAddToMyList(userid, 0, 0, document.getElementById("patname").value, document.getElementById("mobile").value);
            }
            else {
                alert("Please enter the mobile no")
            }
        }

        function fnMobileVerify(idname) {
            var patt = new RegExp("\d{3}[\-]\d{2}[\-]\d{4}");
            var x = idname;
            var res = patt.test(x.value);
            if (!res) {
                x.value = x.value
                    .match(/\d*/g).join('')
                    .match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join('')
                    .replace(/-*$/g, '');
            }
        }

    </script>

    <script>
        //Load Slot Against the selected Date
        function GetCalDate() {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            if (document.getElementById("calendarclickvalue").value == "") {
            }
            else {
                var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classtype + "\'";
                var strCon = "BB_CONSTR";
                Loadslottable(str9, strCon);
            }
        }

        //load slot list
        function Loadslottable(strQuery, strCon) {
            $.blockUI({ message: '<h6>Loading...</h6>' });
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = '';
                    var trHTML1 = '';
                    var slotname = "";
                    var trmorning = '';
                    var trnoon = '';
                    var treve = '';

                    var morningcounter = 0;
                    var nooncounter = 0;
                    var evecounter = 0;
                    var btncounter = 1;
                    $("#morningslot").empty()
                    $("#noonslot").empty()
                    $("#eveslot").empty()
                    // $('#tblslot').empty()
                    if (response == '') {
                        $("#morningslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        $("#noonslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        $("#eveslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        // trHTML = '<li class="w-100" style="list-style-type: none;"><b style="color:#EE4000; font-size:15px;">No online apoointment avilable. <br> Please call doctors Contact number directly. &nbsp;&nbsp;<i class="fa fa-thumbs-down"></i></b></li>'
                        // $('#tblslot').append(trHTML);
                    }
                    else {
                        $.each(combo, function (i, item) {
                            slotname = "'" + item.name + "' ";
                            //Saturday ( 09:15 - 09:20 )

                            var time = item.FromTime;
                            var mor = time.split(":")[0]
                            var timeOfDay = parseInt(mor.trim())

                            /*if (item.slotcount == 0) {
                                var slot1 = item.name;
                                var value1 = slot1.split('(');
                                var day1 = value1[0];
                                var time1 = '(' + value1[1];
                                //trHTML1 += '<tr style="text-decoration: line-through; color:red"><td style="border-right: 1px solid #fff;line-height: 0.79; color:#b2b2b2" align="left"><i class="fa fa-clock-o"></i>&nbsp;' + day1 + '<span>&nbsp;' + time1.replace(/ /g, '') + '</span></td><td style="border-right: 1px solid #fff;  line-height: 0.79; color:#b2b2b2" align="left">' + item.slotcount + '</td><td onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ');"  more" data-toggle="modal" href="#u" style="pointer-events: none;margin-left:0px; margin-right:0px; padding-left:0px; text-align:center; padding-right:0px; background-color:#00CDCD; color:White; cursor:pointer;  line-height: 0.79;"><div class="hor-menu hidden-sm hidden-xs">Book Appointment</div><div class="hor-menu visible-sm visible-xs" title="Book Appointment" data-toggle="tooltip"><i class="fa fa-clock-o"></i></div></td></tr>'
                                //trHTML1 = '<ul><div>'
                                trHTML1 += '<li class="w-100" onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ');" ><a href="#" class="btn waves-effect waves-light w-75 mx-3" data-toggle="modal" >' + time1.replace(/ /g, '') + '</a></li>'

                            }
                            else*/
                            if (item.slotcount != 0) {
                                var btnc = btncounter++;
                                var slot = item.name;
                                var value = slot.split('(');
                                var day = value[0];
                                var time = '(' + value[1];
                                var tokenno = item.TokenNo;

                                if (timeOfDay >= 0 && timeOfDay < 12) {
                                    morningcounter++
                                    trmorning += '<button id=' + btnc + '  class="appTimeBtn" onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ',' + btnc + ');">' + tokenno.replace(/ /g, '') + '</button>'
                                    //return MORNING;
                                } else if (timeOfDay >= 12 && timeOfDay < 16) {
                                    nooncounter++
                                    trnoon += '<button id=' + btnc + '  class="appTimeBtn" onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ',' + btnc + ');">' + tokenno.replace(/ /g, '') + '</button>'
                                    //return AFTERNOON;
                                } else if (timeOfDay >= 16 && timeOfDay < 24) {
                                    evecounter++
                                    treve += '<button id=' + btnc + '  class="appTimeBtn" onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ',' + btnc + ');">' + tokenno.replace(/ /g, '') + '</button>'
                                    //return EVENING;
                                }
                                /*else if (timeOfDay >= 21 && timeOfDay < 24) {
                                return NIGHT;
                                }*/

                                // trHTML1 += '<li class="testtab w-100" onclick="Scheduleappointment(' + item.id + ',' + slotname + ',' + item.slotcount + ');" ><a href="#" class="btn waves-effect waves-light w-75 mx-3" data-toggle="modal" >' + time.replace(/ /g, '') + '</a></li>'
                            }
                        });

                        /* if (trHTML1 == "") {
                             trHTML1 = '<li class="w-100" style="list-style-type: none;"><b style="color:#EE4000; font-size:15px;">No online apoointment avilable. <br> Please call doctors Contact number directly. &nbsp;&nbsp;<i class="fa fa-thumbs-down"></i></b></li>'

                         }*/

                        // $('#tblslot').append(trHTML + trHTML1 + '</ul></div>');
                        if (morningcounter == 0) {
                            $("#morningslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        }
                        else {
                            $("#morningslot").append(trmorning)
                        }
                        if (nooncounter == 0) {
                            $("#noonslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        }
                        else {
                            $("#noonslot").append(trnoon)
                        }
                        if (evecounter == 0) {
                            $("#eveslot").append('<div class="noSlot text-center"><h4 class="m-0">No Slot Available</h4></div>')
                        }
                        else {
                            $("#eveslot").append(treve)
                        }
                        $(".appTimeBtn ").click(function () {
                            $(".appTimeBtn").removeClass("highlightbg");
                            $(this).addClass("highlightbg");
                        });
                        //$('li').click(function () {
                        //$('li', $(this).parent()).removeClass('active');
                        //$(this).addClass('active');
                        //});
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
            window.setTimeout(function () {
                $.unblockUI();
            }, 2000);
        }

        //Book Appointment
        function Scheduleappointment(slotid, slotvalue, slotcount, btnid) {
            /*if(document.getElementById("cboclassname").value =="" || document.getElementById("cboclassname").value ==0 )
            {
                 var id='"'+"#"+btnid+'"';
                 alert("Please select the case name")
                 $("#cboclassname").select2('open');
                 $(id).removeClass("highlightbg");
            }
            else
            {*/
            $.blockUI({ message: '<h6>Loading...</h6>' });
            if (document.getElementById("checkexsistslotAvailability").value != slotid && document.getElementById("checkexsistslotAvailability").value != "" && document.getElementById("checkexsistslotAvailability").value != 0 && document.getElementById("schedulereserveid").innerHTML != "" && document.getElementById("schedulereserveid").innerHTML != 0) {

                if (confirm("Are you sure you want to change the slot")) {
                    /*var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                    var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + document.getElementById("cboclassname").value + "\'";
                    var strCon = "BB_CONSTR";
                    Loadslottable(str9, strCon);*/
                    UpdateScheduleCount(1)
                }
            }

            $("#feesplitup").focus()
            document.getElementById("checkexsistslotAvailability").value = slotid;
            document.getElementById("instructionslotno").innerHTML = slotid;
            document.getElementById("instructionslotcount").innerHTML = slotcount;
            document.getElementById("instructionslotvalue").innerHTML = slotvalue;
            document.getElementById("chkslotid").innerHTML = "";
            document.getElementById("chkslotid").innerHTML = slotid;
            document.getElementById("instructionslotno").innerHTML = "";
            document.getElementById("instructionslotcount").innerHTML = "";
            if (slotcount == 0) {
                alert("Please select the valid slot");
            }
            else {
                $("#hidregistrationcontant").css("display", "");
                CheckSlotCount(slotid, slotvalue)
                document.getElementById("tblexsistingpat").innerHTML = "";
                $("#sal").val("");
                $("#relationship").val("");
                $("#city").val("");
                //if patient have regno and dob - I have a Registration Number

                /*if (localStorage.RegNoReview != "" && localStorage.DobReview != "") {
                    Exsistingreguser()
                }*/

                //localStorage.RegNoReview = RegNo;
                //localStorage.DobReview = dateofbirth;
                //localStorage.ppreviewregload=1;

                if (localStorage.ppapiloginusername != "" && localStorage.ppapiloginpassword != "" && localStorage.ppapiloginusername != undefined && localStorage.ppapiloginpassword != undefined) {
                    currentuser()
                } else {
                    document.getElementById("regno").value = '';
                    document.getElementById("phonenumber").value = '';
                    Exsistingreguser()
                    ExsistRegFunction()
                }


                //if (localStorage.RegNoReview != "" && localStorage.DobReview != "" && localStorage.ppreviewregload == 1) {

                //    document.getElementById("regno").value = localStorage.RegNoReview;
                //    //document.getElementById("dob").value = localStorage.DobReview;
                //    document.getElementById("phonenumber").value = localStorage.MobilenoReview;
                //    Exsistingreguser()
                //    ExsistRegFunction()

                //}


                if (localStorage.ppapiloginusername != "" && localStorage.ppapiloginpassword != "" && localStorage.ppreviewregload == "") {
                    currentuser()
                }




                document.getElementById("patname").value = "";
                document.getElementById("email").value = "";
                document.getElementById("mobile").value = "";
                document.getElementById("DOB").value = "";
                document.getElementById("age").value = "";
                document.getElementById("Male").checked = false;
                document.getElementById("Female").checked = false;
                document.getElementById("PersonFill").value = "";
                document.getElementById("address").value = "";
                document.getElementById("doctornamemodal").innerHTML = "";
                document.getElementById("slotmodal").innerHTML = "";
                document.getElementById("slotidmodal").innerHTML = "";
                document.getElementById("selectdatemodal").innerHTML = "";
                document.getElementById("deptidmodal").innerHTML = "";
                document.getElementById("firstname").value = "";
                document.getElementById("midname").value = "";

                document.getElementById("doctornamemodal").innerHTML = document.getElementById("doctorname").innerHTML;
                document.getElementById("slotmodal").innerHTML = slotvalue;
                document.getElementById("slotidmodal").innerHTML = slotid;

                document.getElementById("selectdatemodal").innerHTML = document.getElementById("calendarclickvalue").value;
                document.getElementById("deptidmodal").innerHTML = document.getElementById("departmentid").innerHTML;
            }
            window.setTimeout(function () {
                $.unblockUI();
            }, 2000);
            //}
        }

        //Check Slot Count before Booking the Slot
        function CheckSlotCount(slotid, slotvalue) {
            var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=5,@Schedulaid=\'" + slotid + "\',@BookDt=\'" + document.getElementById("calendarclickvalue").value + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    $.each(combo, function (i, item) {
                        if (item.countvalue == 0) {
                            alert("The slot is not avaiable")
                        }
                        else {
                            $("#hidregistrationcontant").css("display", "");
                            SaveScheduleReserve(slotid, slotvalue)
                        }
                    });
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Save Slot - Increase 1 Count in ScheduleReserve & Decrease 1 Count in Schedule table
        function SaveScheduleReserve(slotid, slotvalue) {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            runTimer();
            var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=1,@Schedulaid=\'" + slotid + "\',@IPAddress=\'" + document.getElementById("ipaddress").value + "\',@BookDt=\'" + document.getElementById("calendarclickvalue").value + "\'";
            strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    $.each(combo, function (i, item) {
                        document.getElementById("schedulereserveid").innerHTML = item.Column1;
                    });

                    var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                    var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classtype + "\'";
                    var strCon = "BB_CONSTR";
                    //Loadslottable(str9, strCon);

                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        // Load Timer for 30 Min
        var timer1 = 0
        var totalSec = 0;
        var digitMin = Math.floor(totalSec / 60);
        var digitSec = totalSec % 60;
        function cleartimercount() {
            document.getElementById("timercount").innerHTML = "";
            clearInterval(timer1);
        }

        function runTimer() {
            cleartimercount();
            //totalSec = 1800; // 30 min
            totalSec = document.getElementById("controlregcolsesec").innerHTML;
            digitMin = Math.floor(totalSec / 60);
            digitSec = totalSec % 60;
            totalSec++;
            timer1 = setInterval(function () {
                totalSec -= 1;
                digitMin = Math.floor(totalSec / 60);
                digitSec = totalSec % 60;
                if (totalSec == 0) {
                    UpdateScheduleCount(0);
                    //$("#responsivehospitalcensus").modal("hide");
                    $("#hidregistrationcontant").css("display", "none");
                    clearInterval(timer1);
                }
                var SecondsCheck = ("0" + digitSec).slice(-2);
                var DigitsCheck = ("0" + digitMin).slice(-2)
                if (document.getElementById("timercount").innerHTML == "05:00") {
                    alert("Registration closes in 5 minutes hurry up...!")
                    document.getElementById("timercount").innerHTML = DigitsCheck + ':' + SecondsCheck;
                }
                else {
                    document.getElementById("timercount").innerHTML = DigitsCheck + ':' + SecondsCheck;
                }
            }, 1000);
        }
        //Update Slot Count when the Registration is not Done...!!!
        function UpdateScheduleCount(reloadvalue) {
            var classtype = "";
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            var strQuery = "exec Doctor_Appointment_Schedule_Reserve @opt=3,@schedulereverseid=\'" + document.getElementById("schedulereserveid").innerHTML + "\',@Schedulaid=\'" + document.getElementById("slotidmodal").innerHTML + "\'";
            var strCon = "BB_CONSTR";
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    var combo = eval(response);
                    if (reloadvalue != 1) {
                        var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                        var str9 = "exec FOOnline_LoadCombos @opt=47,@id=\'" + doctorid + "\',@Date=\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=\'" + classtype + "\'";
                        var strCon = "BB_CONSTR";
                        Loadslottable(str9, strCon);
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

    </script>

    <script>
        function RazorPaypayment(orderidvalue, amountvalue1) {
            var amountvalue = parseInt(amountvalue1)
            //alert("rp: "+amountvalue)
            $.ajax({
                url: '../api/RazorPay/CreateOrder',
                type: 'POST',
                data: { orderid: orderidvalue, amount: amountvalue, CompId: localStorage.ApiURLcompanyid },
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                    console.log(jqXHR.responseText)
                },
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    console.log(response)
                    console.log(response.Attributes.id)
                    document.getElementById("hRPOrderId").value = response.Attributes.id;
                    onScriptLoad();
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        function onScriptLoad() {
            //alert(parseInt(document.getElementById("amount").innerHTML)*100)
            var options = {
                "key": document.getElementById("hCompKeyId").value, // Enter the Key ID generated from the Dashboard
                "amount": parseInt(document.getElementById("amount").innerHTML) * 100, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                "currency": document.getElementById("hCompCurrency").value,
                "name": document.getElementById("hCompanyName").value,
                "description": document.getElementById("txtpatientname").value,
                "image": document.getElementById("hCompImgPath").value,
                "order_id": document.getElementById("hRPOrderId").value, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                "handler": function (response) {
                    console.log(response)
                    console.log(response.razorpay_payment_id);
                    console.log(response.razorpay_order_id);
                    console.log(response.razorpay_signature);
                    fnFetchOrderDetail(response.razorpay_payment_id, response.razorpay_signature)
                    //// fnSaveReturnSuccess(response.razorpay_payment_id)
                    //fnVerifyOrderDetail(response.razorpay_payment_id, response.razorpay_signature)
                },
                "prefill": {
                    "name": document.getElementById("txtpatientname").value,
                    "email": document.getElementById("txtemailid").value,
                    "contact": document.getElementById("txtphonenumber").value
                },
                "notes": {
                    "address": document.getElementById("hCompAddr").value
                },
                "theme": {
                    "color": document.getElementById("hCompTheme").value
                }
            };
            console.log(options)
            var rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', function (response) {
                alert(response.error.reason);
                console.log(response.error.code);
                console.log(response.error.description);
                console.log(response.error.source);
                console.log(response.error.step);
                console.log(response.error.reason);
                console.log(response.error.metadata.order_id);
                console.log(response.error.metadata.payment_id);
            });
            rzp1.open();
            // e.preventDefault();
        }
        //Verify Payment Details
        function fnFetchOrderDetail(razorpay_payment_id, razorpay_signature) {
            $.ajax({
                url: '../api/RazorPayFetch/FetchOrder',
                type: 'POST',
                data: { RPPaymentid: razorpay_payment_id, RPOrderId: document.getElementById("hRPOrderId").value, RPSignature: razorpay_signature, Amount: parseInt(document.getElementById("amount").innerHTML) * 100, CompId: document.getElementById("hCompanyId").value },
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                },
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    if (combo == '') {
                        alert("Signature not verified")
                    }
                    else {
                        fnSaveReturnSuccess(razorpay_payment_id, razorpay_signature, response)
                        console.log(response)
                        console.log(response.Attributes.id)
                        console.log(response.Attributes.method)
                        alert("Payment received. Processing...")
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        var payId1 = ''
        var payId = ''
        //Load Company Details
        function LoadCompDetail(CompId) {
            var strCon = "BBOnline";
            var strQuery = "exec PatientPortal_CompanyList @opt=2,@CompId =" + CompId;
            payId1 = ''
            payId = ''
            // var companyid = document.getElementById("select-company").value;
            //alert(strQuery)
            $.ajax({
                url: '../api/Getlocal',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon },
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                },
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    var trHTML1 = "";
                    var checking = false;
                    $("#hiddpaymentdetails").empty()
                    $("#hiddpaymentdetailsreview").empty()
                    var counter = 0;
                    var counter1 = 0;
                    if (combo == '') {
                        alert("Website not configured")
                    }
                    else {
                        $.each(combo, function (index, item) {
                            var dataLength = combo.length - 1
                            if (index == 0) {
                                document.getElementById("hCompanyId").value = item.CompyId;
                                document.getElementById("hCompanyName").value = item.CompName;
                                document.getElementById("hCompCurrency").value = item.CompCur;
                                document.getElementById("hCompKeyId").value = item.MIDorKeyId;
                                document.getElementById("hCompTheme").value = item.CompTheme;
                                document.getElementById("hCompImgPath").value = item.LogoPath;
                                document.getElementById("hCompAddr").value = item.CompAddr;
                                document.getElementById("hPayGateway").value = item.PayGateway;
                                document.getElementById("hRegType").value = item.RegType;
                                console.log(document.getElementById("hPayGateway").value)
                            }
                            var id = 'payment' + counter++
                            var id1 = 'paymentone' + counter1++
                            payId = id
                            payId1 = id1
                            //trHTML += '<div class="col-md-4"><label class="radio-inline payLable"><div class="radio radio-info p-0"><input type="radio" value="' + item.PayGateway + '"  name="radiopaymentbtn" class="card-input-element"><div class="card card-body border d-block" style="font-size:11pt"><i class="bi bi-credit-card-2-back-fill mr-3"></i>' + item.PayGateway + '</div></div></label></div> '
                            var image = "../" + item.cPG_LogoPath;
                            trHTML += '<div class="radio-list"><ul class="payBtn SinglePymt"><li class="col-md-4"><input type="radio" id=' + id + ' name="radiopaymentbtn" value="' + item.PayGateway + '"><label class="w-100 d-flex justify-content-between align-items-center my-1" for=' + id + '>' + item.PayGateway + '<img class="float-right" width="30" src=' + image + ' /></label></li></ul></div>'
                            trHTML1 += '<div class="radio-list"><ul class="payBtn SinglePymt"><li class="col-md-4"><input type="radio" id=' + id1 + ' name="radiopaymentbtn" value="' + item.PayGateway + '"><label class="w-100 d-flex justify-content-between align-items-center my-1" for=' + id1 + '>' + item.PayGateway + '<img class="float-right" width="30" src=' + image + ' /></label></li></ul></div>'
                            console.log('datalength', dataLength);
                            if (dataLength == 0) {
                                if (dataLength === index) {
                                    // alert('in')
                                    checking = true;

                                }
                            }


                        });
                        $("#hiddpaymentdetails").append(trHTML)
                        $("#hiddpaymentdetailsreview").append(trHTML1)
                        if (checking === true) {

                            document.getElementById(payId).checked = true;
                            document.getElementById(payId1).checked = true;
                            $('.SinglePymt').css('display', 'none')
                        }

                    }
                    /*var orderidvalue="232323";
                    var amountvalue="100.00"
                    RazorPaypayment(orderidvalue, amountvalue)*/
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        function timeConverter(UNIX_timestamp) {
            var a = new Date(UNIX_timestamp * 1000);
            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var year = a.getFullYear();
            var month = months[a.getMonth()];
            var date = a.getDate();
            var hour = a.getHours();
            var min = a.getMinutes();
            var sec = a.getSeconds();
            var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec;
            return time;
        }
        function fnSaveReturnSuccess(RazorPayId, razorpay_signature, response) {
            //alert(response)
            //document.getElementById("hOpRegNo").value="3434";
            console.log(response.Attributes.status)
            var strCon = "BB_CONSTR";
            var strQuery = "exec PatientPortal_Online_BillPost_AuthDtl "
            strQuery += "@OPNo=\'" + document.getElementById("hOpRegNo").value + "\',"
            strQuery += "@cTransaction_currency=\'" + document.getElementById("hCompCurrency").value + "\',"
            strQuery += "@cAmount=\'" + parseInt(response.Attributes.amount) / 100 + "\',"
            strQuery += "@dTransaction_time=\'" + timeConverter(response.Attributes.created_at) + "\',"
            strQuery += "@cTransaction_auth_state=\'" + response.Attributes.acquirer_data.auth_code + "\',"
            strQuery += "@cMerchant_key_id=\'" + document.getElementById("hCompKeyId").value + "\',"
            strQuery += "@cTransaction_response_code=\'" + response.Attributes.entity + "\',"
            strQuery += "@cHash_Value=\'" + razorpay_signature + "\',"
            strQuery += "@cTransaction_response_message=\'" + JSON.stringify(response.Attributes.card) + ", " + JSON.stringify(response.Attributes.bank) + ", " + JSON.stringify(response.Attributes.wallet) + ", " + JSON.stringify(response.Attributes.vpa) + "\',"
            strQuery += "@cPayment_instrument=\'" + response.Attributes.method + "\',"
            strQuery += "@cPayzippy_transaction_id=\'" + RazorPayId + "\',"
            strQuery += "@cTransaction_status=\'" + response.Attributes.status + "\',"
            strQuery += "@cHash_method=\'" + response.Attributes.card_id + "\',"
            strQuery += "@cFraud_action=\'" + response.Attributes.error_source + "\',"
            strQuery += "@cMerchant_transaction_id =\'" + document.getElementById("hRPOrderId").value + "\',"
            strQuery += "@cIs_international=\'" + response.Attributes.error_source + "\',"
            strQuery += "@cFraud_details=\'" + response.Attributes.error_code + "," + response.Attributes.error_description + "\',"
            strQuery += "@cPayment_method=\'" + response.Attributes.method + "\',"
            strQuery += "@bPaid_Status=\'" + Number(response.Attributes.captured) + "\',"
            strQuery += "@remarks=\'" + response.Attributes.description + "\'"
            var companyid = document.getElementById("hCompanyId").value;
            console.log(strQuery)
            $.ajax({
                url: '../api/Dataset',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: companyid },
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                },
                success: function (response) {
                    var combo = eval(response);
                    //var html = combo[0].ReturnMessage;
                    console.log(combo)
                    fnVerifyOrderDetail(RazorPayId, razorpay_signature)
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
        //Verify Payment Details
        function fnVerifyOrderDetail(razorpay_payment_id, razorpay_signature) {
            $.ajax({
                url: '../api/RazorPayCheck/VerifyOrder',
                type: 'POST',
                data: { RPPaymentid: razorpay_payment_id, RPOrderId: document.getElementById("hRPOrderId").value, RPSignature: razorpay_signature, Amount: parseInt(document.getElementById("amount").innerHTML) * 100, CompId: document.getElementById("hCompanyId").value },
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                },
                success: function (response) {
                    var combo = eval(response);
                    var html = "";
                    var trHTML = "";
                    if (combo == '') {
                        alert("Signature not verified")
                    }
                    else {
                        //fnSaveReturnSuccess(razorpay_payment_id, razorpay_signature, response)
                        console.log(response)
                        console.log(response.Attributes.id)
                        console.log(response.Attributes.method)
                        alert("Payment captured. Confirming...")
                        window.location = 'Paymentsucces.html?OPNo=' + document.getElementById("hOpRegNo").value + '&companyid=' + document.getElementById("hCompanyId").value;
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }
    </script>
    <script type="text/jscript">
        //registration part
        //New Registration
        function PatientPortalNewRegistration() {
            //alert($("input[type='radio'][name='radiopaymentbtn']:checked").length)
            if (document.getElementById("patname").value == "") {
                alert("Please enter the paient name");
            }
            else if (document.getElementById("email").value == "") {
                alert("Please enter the mail id");
            }
            else if (document.getElementById("mobile").value == "") {
                alert("Please enter the mobile number");
            }
            else if (document.getElementById("DOB").value == "") {
                alert("Please enter the DOB");
            }
            else if (document.getElementById("age").value == "") {
                alert("Please enter the age");
            }
            else if (document.getElementById("Male").checked == false && document.getElementById("Female").checked == false) {
                alert("Please enter the Gender");
            }
            else if (document.getElementById("address").value == "") {
                alert("Please enter the address");
            }
            else if (document.getElementById("city").value == "") {
                alert("Please select the city");
            }
            else if (document.getElementById("PersonFill").value == "") {
                alert("Please enter the patient relation name");
            }
            else if ($("input[type='radio'][name='radiopaymentbtn']:checked").length == 0) {
                alert("Please select the payment mode")
            }
            else {
                var classtype = 1;
                $('input[name="classlistpayment"]').each(function () {
                    if ($(this).is(':checked')) {
                        classtype = $(this).val();
                    }
                });
                document.getElementById("btnmodal").disabled = false;

                document.getElementById("hiddentotalamount").value = document.getElementById("amount").innerHTML;
                document.getElementById("txtpatientname").value = document.getElementById("patname").value;
                document.getElementById("txtemailid").value = document.getElementById("email").value;
                document.getElementById("txtphonenumber").value = document.getElementById("mobile").value;

                var userid = 1;
                var amount = document.getElementById("amount").innerHTML;
                var slot = document.getElementById("slotidmodal").innerHTML;
                var companyid = localStorage.ApiURLcompanyid;
                var doctorid = document.getElementById("hiddendoctorid").innerHTML;
                var address = document.getElementById("address").value;
                var cityid = document.getElementById("city").value;
                var maritalstatusid = "0";
                var DOB = document.getElementById('DOB').value;
                var y = DOB.split("-")[0];
                var m = DOB.split("-")[1];
                var d = DOB.split("-")[2];
                var DOBB = d + '-' + m + '-' + y;
                var gender = "";
                if (document.getElementById("Male").checked == true) {
                    gender = "M";
                }
                else {
                    gender = "F";
                }
                var regbilldetail = "" + document.getElementById("hidserviceheaderid").value + "~" + document.getElementById("hidserviceid").value + "~" + document.getElementById("hidserviceamount").value + "~0~0~1~0~1~1~1~" + document.getElementById("hidserviceamount").value + "~0~0~0|"
                var consultationcharge = "" + document.getElementById("hidcosultationheaderid").value + "~" + document.getElementById("hidcosultationserviceid").value + "~" + document.getElementById("hidcosultationamount").value + "~0~0~1~0~1~1~1~" + document.getElementById("hidcosultationamount").value + "~0~0~0|";
                //var strQuery = "exec OnlineConsulting_New_Review_15SE @PatOPIdRequired=1,@CompanyId=N\'" + companyid + "\',@UserId=N\'" + userid + "\',@IPAddress=N'::1',@Sal=N\'" + $("#sal option:selected").text() + "\',@LastName=N\'" + document.getElementById("patname").value + "\',@Gender=N\'" + gender + "\',@TransGender=N' ',@Age=N\'" + document.getElementById("age").value + "\',@PresentAddress=N\'" + address + "\',@PresentCityId=N\'" + cityid + "\',@PresentPinCode=N\'" + document.getElementById("temppincode").value + "\',@CountryCode=N' +91',@CountryFlag=N'iti-flag in',@MobileNo=N\'" + document.getElementById("mobile").value + "\',@BookDt=N\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=N'2',@DoctorId=N\'" + doctorid + "\',@WhatsAppNo=N'',@WhatsAppCountryCode=N'',@whatsAppCountryFlag=N'',@PatId=N'',@DocAppointmentScheduleId=N\'" + slot + "\',@BookingPatTypeId=N'1',@billAmt=N\'" + amount + "\',@BillDtl=N\'" + regbilldetail+consultationcharge + "\'"
                var newregbilldata = document.getElementById("hidnewregbilldetailstr").value;

                var strCon = "BB_CONSTR";
                var strQuery = "exec PatientPortal_Online_Reg_Save @patName=\'" + document.getElementById("patname").value + "\',@AadharNo='',@dob=\'" + DOBB + "\',"
                strQuery += "@Gender=\'" + gender + "\',@Trans_Gender='0',@Mobile=\'" + document.getElementById("mobile").value + "\',@Email=\'" + document.getElementById("email").value + "\',"
                strQuery += "@addr1=\'" + address + "\',@addr2 ='',"
                strQuery += "@CityId=\'" + cityid + "\',@StateId='0',@NationId='1',@PinCode=\'" + document.getElementById("temppincode").value + "\',@Remarks='',"
                strQuery += "@RegType='OP',@IsHospRegistered='1',@DoseType='1',@PatOPId='',@cIPAddress='',@PayAtHosp='0',"
                strQuery += "@docAppointmentScheduleId=\'" + slot + "\',"
                strQuery += "@bookDt=\'" + document.getElementById("calendarclickvalue").value + "\',"
                strQuery += "@doctorId=\'" + doctorid + "\',"
                strQuery += "@deptId=\'" + document.getElementById("departmentid").innerHTML + "\',@user_id=\'" + userid + "\',@Age=\'" + document.getElementById("age").value + "\',"
                strQuery += "@BillDtl=\'" + newregbilldata + "\',@TotalBillAmount=\'" + amount + "\',@companyid=\'" + companyid + "\',@BookingPatTypeId=1,@sal=N\'" + $("#sal option:selected").text() + "\'"
                strQuery += ",@RegHdrId=\'" + document.getElementById("hidserviceheaderid").value + "\' ,@ConHdrId=\'" + document.getElementById("hidcosultationheaderid").value + "\',@servID1=\'" + document.getElementById("hidserviceid").value + "\',@servID2=\'" + document.getElementById("hidcosultationserviceid").value + "\'		,@servAmt1=\'" + document.getElementById("hidserviceamount").value + "\',@servAmt2=\'" + document.getElementById("hidcosultationamount").value + "\',@ClassId=\'" + classtype + "\'"
                //@RegConsFlg
                //alert(strQuery)
                console.log(strQuery)
                SavePPRegistration(strQuery, strCon, 1);
            }
        }
        function SavePPRegistration(strQuery, strCon, value) {
            //console.log(strQuery)
            document.getElementById("btnmodal").disabled = true;
            var paymentmode = "";
            $('input[name="radiopaymentbtn"]').each(function () {
                if ($(this).is(':checked')) {
                    paymentmode = $(this).val();
                    console.log($(this).val());
                }
            });
            $.ajax({
                url: '../api/DatasetTable',
                type: 'POST',
                data: { strQuery: strQuery, strCon: strCon, Companyid: localStorage.ApiURLcompanyid },
                dataType: 'json',
                success: function (response) {
                    var combo = eval(response);
                    console.log(response)
                    //alert(response)
                    if (response != "" && response != null && response != 'null') {
                        $.each(combo, function (index, item) {
                            var html = item.ReturnMessage;
                            console.log(combo)
                            console.log(item.ReturnMessage)
                            var opid = "";
                            if (html.split("$").length > 1) {
                                if (value == 1) {
                                    //new
                                    //Record(s) Saved Successfully $PatId=38720$OPID=52767$OPNo=H2119190263
                                    CompleteSchedleReserve(html.split("$")[1].split("=")[1], html.split("$")[2].split("=")[1]);
                                    fnSaveUserRegister(html.split("$")[2].split("=")[1], html.split("$")[3].split("=")[1])
                                    document.getElementById("hOpRegNo").value = html.split("$")[3].split("=")[1];
                                    document.getElementById("HidPPOpRegno").value = html.split("$")[3].split("=")[1]
                                    opid = html.split("$")[2].split("=")[1];

                                }
                                else {
                                    //Record(s) Saved Successfully $PatId=38706$OPID=52753$OPNo=13539$RegNo=H2119190255
                                    CompleteSchedleReserve(html.split("$")[1].split("=")[1], html.split("$")[2].split("=")[1]);

                                    document.getElementById("hOpRegNo").value = html.split("$")[3].split("=")[1];
                                    document.getElementById("HidPPOpRegno").value = html.split("$")[3].split("=")[1]
                                    opid = html.split("$")[2].split("=")[1];
                                }
                                console.log(document.getElementById("HidPPOpRegno").value); // = html.split("$")[3].split("=")[1];
                                console.log(paymentmode)
                                //if (html.split("$")[0].includes('Error')) {
                                if (html.split("$")[4].split("=")[1] == 0 || html.split("$")[4].split("=")[1] == 2) {
                                    alert(html.split("$")[0])
                                }
                                else {
                                    alert(html.split("$")[0] + ". \n\n Please Proceed with Payment.")
                                    if (paymentmode == "razorpay") {
                                        RazorPaypayment(document.getElementById("HidPPOpRegno").value, parseInt(document.getElementById("amount").innerHTML) * 100)
                                    }
                                    else if (paymentmode == "PayU Live" || paymentmode == "PayU Test") {
                                        var amount = parseInt(document.getElementById("amount").innerHTML);//parseInt(document.getElementById("hidserviceamount").value);
                                        var Email = ""
                                        var productinfo = "PAYUpayment";
                                        var sucessuri = document.getElementById("hidpayusuccessurl").value //"http://localhost/PatientPortals/PatientPortal/ResponseHandling.aspx";
                                        var failureuri = document.getElementById("hidpayusuccessurl").value //"http://localhost/PatientPortals/PatientPortal/ResponseHandling.aspx";
                                        //var sucessuri="";
                                        //var failureuri="";
                                        var firstname = "";
                                        var phone = "";
                                        if (value == 1) {
                                            firstname = document.getElementById("patname").value
                                            Email = document.getElementById("email").value
                                            phone = document.getElementById("mobile").value
                                        }
                                        else {
                                            firstname = document.getElementById("appointpatientname").innerHTML
                                            Email = document.getElementById("emailpay").innerHTML
                                            phone = document.getElementById("mobilepay").innerHTML
                                        }
                                        //alert('PayURequest.aspx?OPID=' + opid + '&orderidvalue=' + document.getElementById("HidPPOpRegno").value + '&amountvalue=' + amount + '&amount=' + amount + '&Email=' + Email + '&productinfo=' + productinfo + '&sucessuri=' + sucessuri + '&failureuri=' + failureuri + '&firstname=' + firstname + '&phone=' + phone + '')
                                        //amount=1;

                                        window.open('PayURequest.aspx?OPID=' + opid + '&orderidvalue=' + document.getElementById("HidPPOpRegno").value + '&amountvalue=' + amount + '&amount=' + amount + '&Email=' + Email + '&productinfo=' + productinfo + '&sucessuri=' + sucessuri + '&failureuri=' + failureuri + '&firstname=' + firstname + '&phone=' + phone + '&companyid=' + localStorage.ApiURLcompanyid + '&paymentmode=' + paymentmode + '');
                                    }
                                    else if (paymentmode == "WorldLine") {
                                        var patname = "";
                                        var pataddress = "";
                                        var city = "";
                                        var state = "";
                                        var country = "";
                                        var countrysplit = "";
                                        var pincode = "";
                                        var mobile = "";
                                        var patientid = html.split("$")[1].split("=")[1]
                                        var currentTime = new Date()
                                        var hours = currentTime.getHours()
                                        var minutes = currentTime.getMinutes()
                                        if (minutes < 10)
                                            minutes = "0" + minutes
                                        var suffix = "1";

                                        if (hours >= 12) {
                                            suffix = "2";
                                            hours = hours - 12;
                                        }
                                        if (hours == 0) {
                                            hours = 12;
                                        }
                                        if (value == 1) {
                                            patname = document.getElementById("patname").value
                                            //Email=document.getElementById("email").value
                                            mobile = document.getElementById("mobile").value
                                            address = document.getElementById("address").value;
                                            city = $("#city option:selected").text();
                                            countrysplit = document.getElementById("newcountry").innerHTML;
                                            country = countrysplit.substring(0, 2);
                                            if (country == "" || country == 0 || country == null || country == "undefined" || country == "null" || country == "NULL") {
                                                country = 'IN';
                                            }
                                            else {
                                                country = country;
                                            }
                                            pincode = document.getElementById("temppincode").value
                                        }
                                        else {
                                            patname = document.getElementById("appointpatientname").innerHTML
                                            //Email=document.getElementById("emailpay").innerHTML
                                            mobile = document.getElementById("mobilepay").innerHTML
                                            address = document.getElementById("addresspay").innerHTML;
                                            city = document.getElementById("citypay").innerHTML;
                                            countrysplit = document.getElementById("countrypay").innerHTML;
                                            country = countrysplit.substring(0, 2);

                                            if (country == "" || country == 0 || country == null || country == "undefined" || country == "null" || country == "NULL") {
                                                country = 'IN';
                                            }
                                            else {
                                                country = country;
                                            }
                                            pincode = document.getElementById("pincodepay").innerHTML;
                                        }
                                        pataddress = pataddress.replace('&', ' ');
                                        if (pincode == "" || pincode == 0 || pincode == null || pincode == "undefined" || pincode == "null" || pincode == "NULL") {

                                            pincode = "641048";

                                        }

                                        if (value == 1) {

                                            window.open('meTrnReq.aspx?OrderID=' + opid + '&name=' + patname + '&address=' + pataddress + '&city=' + city + '&state=' + state + '&country=' + country + '&postal_code=' + pincode + '&phone=' + mobile + '&email=test&OnlineAuthid=0&DocappAdvance=DoctorAppointment&Bookdate=' + document.getElementById('calendarclickvalue').value + '&Suffix=' + suffix + '&doctor=' + document.getElementById("hiddendoctorid").innerHTML + '&department=' + document.getElementById("departmentid").innerHTML + '&patid=' + patientid + '&newreviewpatient=New&amountvalue=' + parseInt(document.getElementById("amount").innerHTML) + '&PatRegno=' + document.getElementById("HidPPOpRegno").value + '&paymentmode=' + paymentmode + '')
                                        }
                                        else {
                                            window.open('meTrnReq.aspx?OrderID=' + opid + '&name=' + patname + '&address=' + pataddress + '&city=' + city + '&state=' + state + '&country=' + country + '&postal_code=' + pincode + '&phone=' + mobile + '&email=test&OnlineAuthid=0&DocappAdvance=DoctorAppointment&Bookdate=' + document.getElementById('calendarclickvalue').value + '&Suffix=' + suffix + '&doctor=' + document.getElementById("hiddendoctorid").innerHTML + '&addept=' + document.getElementById("departmentid").innerHTML + '&patid=' + patientid + '&newreviewpatient=Review&amountvalue=' + parseInt(document.getElementById("amount").innerHTML) + '&PatRegno=' + document.getElementById("HidPPOpRegno").value + '&paymentmode=' + paymentmode + '')

                                        }
                                    }
                                    else if (paymentmode == "hdfc") {
                                        var patname = "";
                                        var pataddress = "";
                                        var city = "";
                                        var state = "TamilNadu";
                                        var country = "";
                                        var countrysplit = "";
                                        var pincode = "";
                                        if (value == 1) {
                                            patname = document.getElementById("patname").value
                                            address = document.getElementById("address").value;
                                            city = $("#city option:selected").text();
                                            countrysplit = document.getElementById("newcountry").innerHTML;
                                            country = countrysplit.substring(0, 2);
                                            if (country == "" || country == 0 || country == null || country == "undefined" || country == "null" || country == "NULL") {
                                                country = 'IND';
                                            }
                                            else {
                                                country = country;
                                            }
                                            pincode = document.getElementById("temppincode").value
                                            if (pincode == "" || pincode == 0 || pincode == null || pincode == "undefined" || pincode == "null" || pincode == "NULL") {

                                                pincode = "641048";

                                            }
                                            window.open('ccavRequestHandler.aspx?action=neworder&OPID=' + opid + '&orderidvalue=' + document.getElementById("HidPPOpRegno").value + '&amountvalue=' + parseInt(document.getElementById("hidserviceamount").value) + '&paymentmode=' + paymentmode + '&billing_tel=' + document.getElementById("mobile").value + '&billing_email=' + document.getElementById("email").value + '&billing_name=' + patname + '&billing_address=' + address + '&billing_city=' + city + '&billing_state=' + state + '&billing_zip=' + pincode + '&billing_country=' + country + '');
                                            return false;
                                        }
                                        //review registration
                                        if (value == 2) {
                                            patname = document.getElementById("appointpatientname").innerHTML
                                            //Email=document.getElementById("emailpay").innerHTML
                                            mobile = document.getElementById("mobilepay").innerHTML
                                            address = document.getElementById("addresspay").innerHTML;
                                            city = document.getElementById("citypay").innerHTML;
                                            countrysplit = document.getElementById("countrypay").innerHTML;
                                            country = countrysplit.substring(0, 2);

                                            if (country == "" || country == 0 || country == null || country == "undefined" || country == "null" || country == "NULL") {
                                                country = 'IND';
                                            }
                                            else {
                                                country = country;
                                            }
                                            pincode = document.getElementById("pincodepay").innerHTML;
                                            if (pincode == "" || pincode == 0 || pincode == null || pincode == "undefined" || pincode == "null" || pincode == "NULL") {

                                                pincode = "641048";

                                            }
                                            window.open('ccavRequestHandler.aspx?action=neworder&OPID=' + opid + '&orderidvalue=' + document.getElementById("HidPPOpRegno").value + '&amountvalue=' + parseInt(document.getElementById("hidreviewserviceamount").value) + '&paymentmode=' + paymentmode + '&billing_tel=' + document.getElementById("mobile").value + '&billing_email=' + document.getElementById("email").value + '&billing_name=' + patname + '&billing_address=' + address + '&billing_city=' + city + '&billing_state=' + state + '&billing_zip=' + pincode + '&billing_country=' + country + '');
                                            return false;
                                        }
                                    }
                                    else {
                                        location.reload();
                                    }
                                }
                            }
                            else {
                                alert(html.split("$")[0]);
                            }
                        });
                    }
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }

        //Reviewregistration
        function PatientPortalReviewRegistration(patid, mobileno) {
            var classtype = 1;
            $('input[name="classlistpayment"]').each(function () {
                if ($(this).is(':checked')) {
                    classtype = $(this).val();
                }
            });
            var mobile = "";
            document.getElementById("hiddentotalamount").value = document.getElementById("amount").innerHTML;
            var doctorid = document.getElementById("hiddendoctorid").innerHTML;
            var companyid = localStorage.ApiURLcompanyid;
            var userid = 1 //localStorage.portaluserid;
            ////var consultationcharge="" + item.HeaderId + "~" + item.ServiceId + "~" + item.ServiceAmount + "~0~0~1~0~1~1~1~" + item.ServiceAmount + "~0~0~0|";
            ////var strQuery ="exec OnlineConsulting_New_Review_15SE @PatOPIdRequired=1,@CompanyId=N\'" + companyid + "\',@UserId=N\'" + userid + "\',@IPAddress=N'::1',@Sal=N' ',@LastName=N' ',@Gender=N' ',@TransGender=N' ',@Age=N' ',@PresentAddress=N' ',@PresentCityId=N' ',@PresentPinCode=N' ',@CountryCode=N' +91',@CountryFlag=N'iti-flag in',@MobileNo=N'9895695659',@BookDt=N\'" + document.getElementById("calendarclickvalue").value + "\',@ClassId=N'2',@DoctorId=N\'" + doctorid + "\',@WhatsAppNo=N'',@WhatsAppCountryCode=N'',@whatsAppCountryFlag=N'',@PatId=N\'" + document.getElementById("patientid").innerHTML + "\',@DocAppointmentScheduleId=N\'" + document.getElementById("slotidmodal").innerHTML + "\',@BookingPatTypeId=N'2',@billAmt=N\'" + item.ServiceAmount + "\',@BillDtl=N\'" + consultationcharge + "\'"
            //var consultationcharge = "" + document.getElementById("hidcosultationheaderid").value + "~" + document.getElementById("hidcosultationserviceid").value + "~" + document.getElementById("hidcosultationamount").value + "~0~0~1~0~1~1~1~" + document.getElementById("hidcosultationamount").value + "~0~0~0|";
            var consultationcharge = document.getElementById("hidreviewregbilldetailstr").value;

            var strCon = "BB_CONSTR";
            var strQuery = "exec PatientPortal_Online_Reg_Save @patName='',@AadharNo='',@dob='',"
            strQuery += "@Gender='',@Trans_Gender='0',@Mobile=\'" + document.getElementById("mobile").value + "\',@Email='',"
            strQuery += "@addr1='',@addr2 ='',"
            strQuery += "@CityId='',@StateId='0',@NationId='1',@PinCode='',@Remarks='',"
            strQuery += "@RegType='OP',@IsHospRegistered='2',@DoseType='1',@cIPAddress='',@BillAmt=\'" + document.getElementById("modalamount").innerHTML + "\',@PayAtHosp='0',"
            strQuery += "@docAppointmentScheduleId=\'" + document.getElementById("slotidmodal").innerHTML + "\',"
            strQuery += "@bookDt=\'" + document.getElementById("calendarclickvalue").value + "\',"
            strQuery += "@doctorId=\'" + doctorid + "\',"
            strQuery += "@deptId='',@user_id=\'" + userid + "\',@Pat_ID=\'" + patid + "\',@Age=N'',"
            strQuery += "@BillDtl=\'" + consultationcharge + "\',@TotalBillAmount=\'" + document.getElementById("hiddentotalamount").value + "\',@companyid=\'" + companyid + "\',@BookingPatTypeId=2,@sal='',@mobileNo=\'" + mobileno + "\'"
            strQuery += ",@RegHdrId=\'" + document.getElementById("hidreviewserviceheaderid").value + "\',@servID1=\'" + document.getElementById("hidreviewserviceid").value + "\',@servAmt1=\'" + document.getElementById("hidreviewserviceamount").value + "\',@ClassId=\'" + classtype + "\'"
            //alert(strQuery)
            console.log(strQuery)
            SavePPRegistration(strQuery, strCon, 2);
        }

        function testa() {
            window.open('meTrnReq.aspx?OrderID=1&name=test&address=cbe&city=cbestate=tn&country=in&postal_code=641048&phone=8545854585&email=test&OnlineAuthid=0&DocappAdvance=DoctorAppointment&Bookdate=2021-5-12&Suffix=1&doctor=1&department=153&patid=1233&newreviewpatient=New')

        }
        function LoadPayuURL() {
            $.ajax({
                url: '../api/PayuRedirectURL',
                type: 'POST',
                data: {},
                dataType: 'json',
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                },
                success: function (response) {
                    //$("#spnGetdet").html(response.d);
                    document.getElementById("hidpayusuccessurl").value = response;
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        }



    </script>
    <label id="hiddendoctorid" style="display: none"></label>
    <input type="text" name="ipaddress" id="ipaddress" style="display: none" />
    <a href="" id="RedirectUrl" onclick="ClearLocalStorageValue()" style="display:none;">Home</a>
    <input type="hidden" id="hidpaytmjsfilelink" name="hidpaytmjsfilelink" value="" />
    <label id="controlregcolsesec" style="display: none"></label>

    <input type="hidden" id="datevalue" />
    <input id="calendarclickvalue" class="form-control" type="text" name="totalpatient" readonly style="text-align:center; display:none" />
    <div style="color:#55bce9; font-weight:700; font-size:15px; display:none;"> Appointments on -  <span style="font-size:16px;" id="bookingdate"></span></div>
    <label id="hiddenvideochatpayment" style="display: none"></label>
    <span id="tempamount" style="font-size: 16px; color: #CD3278; display:none;"></span>
    <label id="accountid" style="display: none"></label>
    <label id="amount" style="display: none">
    </label>
    <label id="patientid" style="display: none">
    </label>
    <label id="patientregno" style="display: none">
    </label>
    <label id="appointpatientname" style="display: none">
    </label>
    <label id="addresspay" style="display: none">
    </label>
    <label id="citypay" style="display: none">
    </label>
    <label id="mobilepay" style="display: none">
    </label>
    <label id="emailpay" style="display: none">
    </label>
    <label id="schedulereserveid" style="display: none">
    </label>
    <label id="temppatientid" style="display: none">
    </label>
    <!-- <label id="timercount"></label>-->
    <label id="newdist" style="display: none">
    </label>
    <label id="newstate" style="display: none">
    </label>
    <label id="newcountry" style="display: none">
    </label>
    <label id="newpincode" style="display: none"></label>
    <label id="instructionslotno" style="display: none">
    </label>
    <label id="instructionslotcount" style="display: none">
    </label>
    <label id="instructionslotvalue" style="display: none">
    </label>
    <label id="newpatientregno" style="display: none">
    </label>
    <label id="newpatientid" style="display: none">
    </label>
    <label id="newemailpay" style="display: none">
    </label>
    <label id="newmobilepay" style="display: none">
    </label>
    <label id="newcity" style="display: none">
    </label>
    <label id="newaddress" style="display: none">
    </label>
    <label id="newdist" style="display: none">
    </label>
    <label id="newstate" style="display: none">
    </label>
    <label id="newcountry" style="display: none">
    </label>
    <label id="newpincode" style="display: none">
    </label>
    <label id="distpay" style="display: none">
    </label>
    <label id="statepay" style="display: none">
    </label>
    <label id="countrypay" style="display: none">
    </label>
    <label id="pincodepay" style="display: none">
    </label>
    <label id="reviewamountvalue" style="display: none">
    </label>
    <label id="newbillnumber" style="display: none">
    </label>
    <label id="reviewbillnumber" style="display: none">
    </label>
    <label id="newiopid" style="display: none">
    </label>
    <label id="reviewiopid" style="display: none">
    </label>
    <label id="reviewdocappointmentid" style="display: none">
    </label>
    <label id="newdocappointmentid" style="display: none">
    </label>
    <label id="controlregcolsesec" style="display: none">
    </label>
    <label id="rowcounr" style="display: none">
    </label>
    <label id="hiddenvideochatpayment" style="display: none">
    </label>
    <label id="hiddendoctorid" style="display: none">
    </label>
    <label id="hiddenpackagestatus" style="display: none">
    </label>
    <label id="chkslotid" style="display: none">
    </label>

    <label id="schedulereserveid" style="display: none">
    </label>
    <label id="uname" style="display: none">
    </label>
    <input type="hidden" id="hidserviceamount" />
    <input type="hidden" id="hidcosultationamount" />
    <input type="hidden" id="hidserviceheaderid" />
    <input type="hidden" id="hidcosultationheaderid" />
    <input type="hidden" id="hidserviceid" />
    <input type="hidden" id="hidcosultationserviceid" />

    <input type="hidden" id="hidreviewserviceamount" />
    <input type="hidden" id="hidreviewserviceheaderid" />
    <input type="hidden" id="hidreviewserviceid" />

    <input type="hidden" id="hidreviewpayopid" />
    <input type="hidden" id="hidreviewpaypatid" />
    <input type="hidden" id="hidreviewpayopid" />
    <input type="hidden" id="hidreviewpaypatid" />

    <input type="hidden" id="hidnewopid" />
    <input type="hidden" id="hidnewpatientid" />

    <input type="hidden" id="hRPOrderId" />
    <input type="hidden" id="hCompanyId" value="1" />
    <input type="hidden" id="hCompKeyId" value="1" />
    <input type="hidden" id="hCompanyName" value="" />
    <input type="hidden" id="hCompCurrency" value="INR" />
    <input type="hidden" id="hCompImgPath" value="" />
    <input type="hidden" id="hCompAddr" value=" " />
    <input type="hidden" id="hCompTheme" value=" " />
    <input type="hidden" id="hPayGateway" value="" />
    <input type="hidden" id="hRegType" value="OT" />

    <input type="hidden" id="hiddentotalamount" value="0" />
    <input type="hidden" id="txtpatientname" value="0" />
    <input type="hidden" id="txtemailid" value="0" />
    <input type="hidden" id="txtphonenumber" value="0" />

    <input type="hidden" id="hdnOnlineUser" value="0" />



    <!--new detaild-->

    <input type="hidden" id="hOpRegNo" value="0" />
    <input type="hidden" id="HidPPRegNo" value="0" />
    <input type="hidden" id="HidPPOpid" value="0" />
    <input type="hidden" id="HidPPPatid" value="0" />
    <input type="hidden" id="HidPPOpRegno" value="0" />
    <input type="hidden" id="hidpayusuccessurl" value="0" />

    <input type="hidden" id="checkexsistslotAvailability" value="0" />
    <input type="hidden" id="hidnewregbilldetailstr" value="0" />
    <input type="hidden" id="hidreviewregbilldetailstr" value="0" />
    <input type="hidden" id="hiddenbookingdays" value="0" />
    <input type="hidden" id="hiddenCurrentdaycheck" value="0" />


</body>

</html>
